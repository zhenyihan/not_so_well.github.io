<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Category: 學校課程 | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Morris' Blog">
<meta property="og:url" content="http://morris821028.github.io/categories/學校課程/page/3/index.html">
<meta property="og:site_name" content="Morris' Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris' Blog">
<meta name="twitter:description">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          <section id="main">
  
    <article id="post-vr-note2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/16/vr-note2/" class="article-date">
  <time datetime="2015-05-16T06:55:23.000Z" itemprop="datePublished">2015-05-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/16/vr-note2/">虛擬實境 論文研讀 Part 2</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/05/16/vr-note2/" data-id="cimun1kk400qsn2xcz82ihpyf" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/05/16/vr-note2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <blockquote>
<p>接續上一篇，接下來會有很多數學，自己也是一知無解狀態。</p>
</blockquote>
<h2 id="QEM"><a href="#QEM" class="headerlink" title="QEM"></a>QEM</h2><p>QEM 方程如下，當找到許多在等值曲面上的 $p_k$ 時，接著要找到一個最小 $v$ 參數為滿足目標方程</p>
<span>$v^{M} \leftarrow \text{arg } \underset{v}{min} \sum_{k} (n^t_{k} (v - p_{k}))^2$</span><!-- Has MathJax -->
<p>為了找到這個 $v$</p>
<span>$v^M \leftarrow v^M + Q^+ (q - Q v^M)$</span><!-- Has MathJax -->
<p>其中矩陣<span>$Q = \sum_{k} n_{k} n^{t}_{k}$</span><!-- Has MathJax -->，</p>
<p>使用 SVD ( singular value decomposition )，奇異值分解去找解，這個計算好像在巨量資料中也存在 SVD，這世界太可怕了！ )。 在找到 $v^M$ 之後，進行簡化模型的縮點 (減少節點數)。經由這一步，可以更貼近物體的輪廓線，來強化邊緣的存在。</p>
<p>為了減少退化三角形跟三角網格的品質，可以藉由 Delaunay Tetrahedralization 再刷新一次。修改、刪除的點其實並不多於全局 (大多都是邊緣？)，那麼可以利用鬆弛的方式進行更新會比全局刷新還來得快速。</p>
<h2 id="實戰"><a href="#實戰" class="headerlink" title="實戰"></a>實戰</h2><p>接下來這篇論文的作者，要進行實戰比較 (一起來吸收別人怎麼去驗證、統計、比較！實驗方法也是相當重要的。)，查看每一次迭代的是否可以的過程、速度。</p>
<h3 id="誤差評定"><a href="#誤差評定" class="headerlink" title="誤差評定"></a>誤差評定</h3><p>利用模擬的模型 (幾何模型構成，拿真物要找到物體表面的方向量有點麻煩)，來看梯度方向的準確性，簡單來說就是拿實際結果與實驗結果中的一個點，於表面上的法向量夾角作為誤差大小。</p>
<span>$\varepsilon_{n}(p) = \text{arccos } (n(p)^t m(p))$</span><!-- Has MathJax -->
<h3 id="梯度估計"><a href="#梯度估計" class="headerlink" title="梯度估計"></a>梯度估計</h3><blockquote>
<p>即使是誤差，平滑也是好事。梯度越小越平滑。</p>
</blockquote>
<p>接著它拿兩個物體 sphere 和 fandisk mesh (球體和一個 ???) 進行測試，看來在那些特殊的地方的誤差。算法可能會在某些特殊邊緣、平面的運行效果不好 (算法擅長於那些特徵計算、不善長什麼，來釐清這一點)。</p>
<p>視覺化時，利用下列二種方式凸顯梯度 central differences、<a href="http://en.wikipedia.org/wiki/Sobel_operator" target="_blank" rel="external">Sobel operator</a> (索貝爾運算就是在影像處理運用中，檢測邊緣、圖像梯度用的)。論文作者接下來提供一的新穎 CT value 的計算公式，與一般傳統的不同，讓這個誤差梯度下降。經由上面兩種方式的梯度表示，發現論文作者提供的這種會再更好一點點。</p>
<h2 id="討論"><a href="#討論" class="headerlink" title="討論"></a>討論</h2><ul>
<li>提供一個更準確的 CT value 的計算方式</li>
<li>動態運作 ODT, QEM 的方式</li>
</ul>
<h3 id="比較-Grid-Based"><a href="#比較-Grid-Based" class="headerlink" title="比較 Grid-Based"></a>比較 Grid-Based</h3><p>拿其他的建造方案，如 Grid-Based Polygonization，進行邊緣銳利比較。使用 <a href="http://en.wikipedia.org/wiki/Hausdorff_distance" target="_blank" rel="external">Hausdorff distance</a> 比較好壞，當然地 Grid-Based 沒對齊好，基本上贏不過三角化的版本！Grid-Based 取樣點夠密集才能勝過 vary triangle 的建模吧！在大多共平面的狀況下，三角形建模的方式需要頂點數非常少。</p>
<h3 id="時間消耗"><a href="#時間消耗" class="headerlink" title="時間消耗"></a>時間消耗</h3><p>由於精準度上的調校，提出的方法比起常規的建模是消耗更多時間，但 CT 掃描數據的時間通常需要 10min 到 1hr，但是提出的方法比掃描時間還快。</p>
<p>也就是說讀取資料很慢，處理速度不用這麼快也沒關係，算起來有種 $O(n)$ 的效能。</p>
<h3 id="空間消耗"><a href="#空間消耗" class="headerlink" title="空間消耗"></a>空間消耗</h3><p>由於過程中需要大量的矩陣、附加值於記憶體中，會消耗上 GB 的使用空間來維護操作。但現代電腦的記憶體可以超過 10GB 以上，因此這個缺點可以忽略不計。</p>
<h3 id="實作細節"><a href="#實作細節" class="headerlink" title="實作細節"></a>實作細節</h3><p>為了加速運行，特別將物體表面周圍的取樣多、密集一點，對於其他地方的取樣少點，如此一來計算量會少很多。</p>
<h3 id="插值"><a href="#插值" class="headerlink" title="插值"></a>插值</h3><p>在 $Tiso= (f(gi)+f(gj))/2$ 中提到插值法，但插值法有很多種，如 tricubic interpolation、bicubic interpolation … 等，如果選擇別種的插植法，效果會不會比較好呢？經過它們的梯度估算方法，他們所提到的插值法會稍微好一些。</p>
<h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>提出一個可以用 CT 圖去建模的方法，仰賴的不是三維空間 volumetric data，並且可以提供一個更高精度的建模方法，用少許的三角形就能構造出相當銳利的結果。</p>
<ol>
<li>以上都是建立在單一素材上，如果由複合的素材構成，可能是一個無法解決的問題。</li>
<li>對於光束敏感的物體，CT 的建造方法可以支持更好。</li>
<li>如果一開始的四面體不夠完善，有可能無法捕抓到邊緣。自適應的 meshing 也許能解決這問題。</li>
</ol>
<blockquote>
<p>提出一個速度慢、空間多的算法，但是現代電腦記憶體夠，速度慢沒關係，比輸入還快就行了</p>
</blockquote>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-security-notes3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/16/security-notes3/" class="article-date">
  <time datetime="2015-05-16T00:52:18.000Z" itemprop="datePublished">2015-05-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/資訊安全/">資訊安全</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/16/security-notes3/">近代加密 快速冪次計算</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/05/16/security-notes3/" data-id="cimun1k7t007cn2xcxtbrev5m" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/05/16/security-notes3/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分治算法/">分治算法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/密碼學/">密碼學</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/模乘法/">模乘法</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>先來上競賽中最常見到的快速冪次寫法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">long long mul(long long a, long long b, long long mod) &#123; </span><br><span class="line">    long long ret = 0; </span><br><span class="line">    for( ; b != 0; b&gt;&gt;=1, (a&lt;&lt;=1)%=mod) </span><br><span class="line">        if(b&amp;1) (ret += a) %= mod; </span><br><span class="line">    return ret; </span><br><span class="line">&#125;</span><br><span class="line">long long mpow(long long x, long long y, long long mod) &#123;</span><br><span class="line">    long long ret = 1;</span><br><span class="line">    while (y) &#123;</span><br><span class="line">        if (y&amp;1)</span><br><span class="line">            ret = mul(ret, x, mod);</span><br><span class="line">        y &gt;&gt;= 1, x = mul(x, x, mod);</span><br><span class="line">    &#125;</span><br><span class="line">    return ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>這樣的寫法，只運算 64-bits 內的結果相當不錯，與接下來講的算法速度差異並不大。但對於近代加密所需要的離散對數過程，則會有放大速度差異，因為 x, y, mod 三個參數的 bit-length 都相當長。</p>
<h2 id="Right-To-Left"><a href="#Right-To-Left" class="headerlink" title="Right-To-Left"></a>Right-To-Left</h2><p>做法就是最普遍見到的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">void pow(x, a) &#123;</span><br><span class="line">    R = 1, g = x</span><br><span class="line"></span><br><span class="line">    for i = 0 to n, step 1</span><br><span class="line">        if (a[i] == 1) // a[i] mean i-bit in a</span><br><span class="line">            R = R * g</span><br><span class="line">        g = g * g</span><br><span class="line">    return R</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">example: a = 26 = (11010)</span><br><span class="line">---</span><br><span class="line">#iterator  0   1    2    3     4 </span><br><span class="line">#g         x, x^2, x^4, x^8, x^16, ...</span><br><span class="line">binary     0   1    0    1     1</span><br><span class="line">x^a =         x^2       x^8 x^16 = x^26</span><br></pre></td></tr></table></figure>
<h2 id="Left-To-Right"><a href="#Left-To-Right" class="headerlink" title="Left-To-Right"></a>Left-To-Right</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">void pow(x, a) &#123;</span><br><span class="line">    R = 1</span><br><span class="line">    for i = n-1 to 0, step -1</span><br><span class="line">        R = R ^ 2</span><br><span class="line">        if (a[i] == 1)</span><br><span class="line">            R = R * x</span><br><span class="line">    return R;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">example: a = 26 = (11010)</span><br><span class="line">---</span><br><span class="line">#iterator  0   1    2      3     4 </span><br><span class="line">binary     1   1    0      1     0</span><br><span class="line">R         x^1 x^11 x^110 x^1101 x^11010</span><br></pre></td></tr></table></figure>
<p>也就是說，每一次迭代，將會將指數左移 (<code>R = R ^ 2</code> 就是要移動 <code>R^xxxx</code> 變成 <code>R^xxxx0</code>，切著看是否要乘上 x 來變成 <code>R^xxxx1</code>)，這方法雖然不錯，但是計算高位元空迴圈可是不能忽略！當然對於設計電路的人，固定變量的迴圈展開後就不存在這問題。</p>
<p>效能上，期望的乘法次數與 Right-To-Left 是差不多的！長度為 n bits 的數字，期望值會有 $n/2$ 個 1，因此大約需要 $n/2$ 次乘法。</p>
<h2 id="Left-To-Right-2-bits"><a href="#Left-To-Right-2-bits" class="headerlink" title="Left-To-Right(2-bits)"></a>Left-To-Right(2-bits)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">void pow(x, a) &#123;</span><br><span class="line">    pre-computation: x^2, x^3</span><br><span class="line"></span><br><span class="line">    R = 1</span><br><span class="line">    for i = n/2 to 0, step -2</span><br><span class="line">        R = R ^ 4</span><br><span class="line">        if (a[i+1]a[i] != 0)</span><br><span class="line">            R = R * x^(a[i+1]a[i])</span><br><span class="line">    return R</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">example: a = 1737 = (01 10 11 00 10 01)</span><br><span class="line">---</span><br><span class="line">#iterator   0   1    2     3     4     5</span><br><span class="line">R          x^1 x^4  x^24  x^108 x^432 x^1736</span><br><span class="line">               x^6  x^27        x^434 x^1737</span><br><span class="line">a[i+1]a[i] 01  10   11    00    10    01</span><br></pre></td></tr></table></figure>
<p>長度為 n bits 的數字，倆倆一起期望值會有 $3n/8$ 個非 0 (00, 01, 10, 11 中 4 個有 3 個 $!= 0$，計算組數只有 $n/2$)，因此大約需要 $3n/8$ 次乘法。比剛剛快上一點呢 ( $3n/8 &lt; n/2$ )！</p>
<h2 id="Left-To-Right-sliding"><a href="#Left-To-Right-sliding" class="headerlink" title="Left-To-Right(sliding)"></a>Left-To-Right(sliding)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">void pow(x, a) &#123;</span><br><span class="line">    pre-computation: x^3</span><br><span class="line"></span><br><span class="line">    R = 1</span><br><span class="line">    for i = n-1 to 0</span><br><span class="line">        if a[i]a[i-1] = (11)</span><br><span class="line">            R = R ^ 4</span><br><span class="line">            R = R * x^3</span><br><span class="line">            i -= 2</span><br><span class="line">        else if a[i]a[i-1] = (00)</span><br><span class="line">            R = R ^ 4</span><br><span class="line">            i -= 2</span><br><span class="line">        else if a[i] = (0)</span><br><span class="line">            R = R ^ 2</span><br><span class="line">            i -= 1</span><br><span class="line">        else if a[i] = (1)</span><br><span class="line">            R = R ^ 2</span><br><span class="line">            R = R * x</span><br><span class="line">            i -= 1</span><br><span class="line">    return R</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">example: a = (1 10 11 00 10 01)</span><br><span class="line">---</span><br><span class="line">#iterator   0   1    2       3     4      5          6</span><br><span class="line">R          x^11    x^11011     x^11011001      x^11011001001</span><br><span class="line">              x^110     x^1101100    x^1101100100</span><br></pre></td></tr></table></figure>
<p>期望的乘法次數 $n/3$，這很可怕，別問我！</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><table>
<thead>
<tr>
<th>Algorithm Name</th>
<th>Table Size</th>
<th>#squaring</th>
<th>Average #Multiplication</th>
</tr>
</thead>
<tbody>
<tr>
<td>Right-To-Left</td>
<td>1: $x^{2^i}$</td>
<td>$n$</td>
<td>$n/2$</td>
</tr>
<tr>
<td>Left-To-Right</td>
<td>1: $x$</td>
<td>$n$</td>
<td>$n/2$</td>
</tr>
<tr>
<td>Left-To-Right(2-bits)</td>
<td>3: $x$, $x^2$, $x^3$</td>
<td>$n$</td>
<td>$3n/8$</td>
</tr>
<tr>
<td>Left-To-Right(sliding)</td>
<td>2: $x$, $x^3$</td>
<td>$n$</td>
<td>$n/3$</td>
</tr>
</tbody>
</table>
<h2 id="Attack"><a href="#Attack" class="headerlink" title="Attack"></a>Attack</h2><p>上述四種方法中，不外乎都存在 <strong><em> Conditional Jump </em></strong> 出現，會導致執行速度跟程式計數器 (Program Counter) 移動上會有所差別。可以進行實作攻擊，從分析時間、電源不穩攻擊，來找到 $a$ 究竟是何物 (通常要偷的都是 $x^a$ 上面的 $a$)！電源雜訊干擾於當指令執行到 <strong> Conditional Jump </strong> 時，干擾 $R$ 的計算發生錯誤，如果沒有發生錯誤，表示 $a \left [ i \right ] = 0$，反之就能知道 $a \left [ i \right ] = 1$。</p>
<p>很趣味地是提供一個不需要 Conditional Jump 的寫法 (實作上)，一樣會有這種問題！</p>
<h3 id="error-example"><a href="#error-example" class="headerlink" title="error example"></a>error example</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">R[1] = 1</span><br><span class="line">for i = n-1 to 0, step -1</span><br><span class="line">    R[1] = R[1] ^ 2</span><br><span class="line">    R[a[i]] = R[1] × g</span><br><span class="line">return R[1]</span><br></pre></td></tr></table></figure>
<p>提供一個不相干的垃圾暫存器 (redundancy register) 來減少 Jump 的問題，很明顯地 電源雜訊干擾 的攻擊仍然存在！這作法很有趣的啊！只是會被攻擊。</p>
<h3 id="Montgomery-Ladder"><a href="#Montgomery-Ladder" class="headerlink" title="Montgomery Ladder"></a>Montgomery Ladder</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">R[0] = 1, R[1] = g</span><br><span class="line">for i = n-1 to 0, step -1</span><br><span class="line">    R[1-a[i]] = R[0] × R[1]</span><br><span class="line">    R[a[i] = R[a[i]] × R[a[i]]</span><br><span class="line">return R[0]</span><br></pre></td></tr></table></figure>
<p>這作法避開之前的問題，解決其中一種被攻擊的方案。</p>
<p>過程中都滿足 $R \left [ 0 \right ] = R \left [ 1 \right ] \times g$，同時 $R \left [ 0 \right ]$ 會是最後的答案。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">example: a = 26 = (11010)</span><br><span class="line">---</span><br><span class="line">#iterator  0   1    2      3      4     5</span><br><span class="line">binary     0   1    1      0      1     0</span><br><span class="line">R[0]       1   x    x^3   x^6   x^13  x^26</span><br><span class="line">R[1]       x   x^2  x^4   x^7   x^14</span><br></pre></td></tr></table></figure>
<p>明顯地，$R \left [ 1 \right ]$ 的計算是為了下一次為 $a \left [ i+1 \right ] = 1$ 而存在的！</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-security-notes2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/16/security-notes2/" class="article-date">
  <time datetime="2015-05-15T23:22:05.000Z" itemprop="datePublished">2015-05-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/資訊安全/">資訊安全</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/16/security-notes2/">資訊安全 期中考筆記</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/05/16/security-notes2/" data-id="cimun1k7b006un2xcwpxqfhfl" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/05/16/security-notes2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/密碼學/">密碼學</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <blockquote>
<p>筆記錯誤多多，請以僅供參考的角度去質疑</p>
</blockquote>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><ol>
<li><p>Please compare the <em>CFB</em> mode the <em>OFB</em> mode by providing a table indicating at least 5 of their advantage and corresponding disadvantage.</p>
</li>
<li><p>This question is about issues of random access of encryption and decryption. Define notations or symbols you need before providing your answer. Please describe how to use <em>CFB</em> mode and <em>CTR</em> mode to randomly encrypt and decrypt a file Why <em>OFB</em> mode is inappropriate to randomly encrypt and decrypt a file?</p>
</li>
<li><p>What is the one-time pad (please provide a figure to explain it) and what is the main security requirement ?</p>
</li>
<li><p>Follow</p>
<ol>
<li>What is the main weakness (disadvantage) of <em>ECB</em> mode ?</li>
<li>How <em>CBC</em> resolves this security problem (explained in mathematical approach) ?</li>
</ol>
</li>
<li><p>Follow </p>
<ol>
<li>Block ciphers process messages in blocks like an extremely large substitution, but this is very difficult to implement for a very big block size. What is Shannon’s idea to realize a block cipher with big block size ?</li>
<li>Feistel cipher structure provides a real implementation of Shannon’s idea. Please explain the main features of Feistel cipher structure.</li>
</ol>
</li>
<li><p>What is the <strong> avalanche effect </strong> of a block cipher ?</p>
</li>
<li><p>What is the <strong> Triple </strong> -DES with two keys ? Please explain the process the derive the complexity of <strong> meet-in-the-middle attack </strong> on Triple-DES with two keys.</p>
</li>
<li><p>For all <em>AES</em> round operations, which operation(s) provides <strong> substitution </strong> and which operations(s) provides <strong> diffusion </strong> ?</p>
</li>
<li><p>Please describe the details of <em>BBS</em> pseudorandom number generator.</p>
</li>
<li><p>Below is the pseduo code of <em>RC4</em>. Please design a modified <em>RC4</em> version with <strong> message dependent </strong> property of key stream.</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">init(master_key) // shuffle S-array with master_key</span><br><span class="line"></span><br><span class="line">i = j = 0</span><br><span class="line">for each message byte M</span><br><span class="line">    i = (i + 1) mod 256</span><br><span class="line">    j = (j + S[i]) mod 256</span><br><span class="line">    swap(S[i], S[j])</span><br><span class="line">    t = (S[i] + S[j]) mod 256</span><br><span class="line">    C = M xor S[t]</span><br></pre></td></tr></table></figure>
<h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><h3 id="Part-1"><a href="#Part-1" class="headerlink" title="Part 1"></a>Part 1</h3><p>請參照 《資訊安全 小考筆記》</p>
<h3 id="Part-2"><a href="#Part-2" class="headerlink" title="Part 2"></a>Part 2</h3><p>請參照 《資訊安全 小考筆記》</p>
<h3 id="Part-3"><a href="#Part-3" class="headerlink" title="Part 3"></a>Part 3</h3><p>one-time pad 概念圖如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">                +------------+               +------------+               </span><br><span class="line">                | random key |               | random key |               </span><br><span class="line">                | generator  |               | generator  |               </span><br><span class="line">                +------------+               +------------+               </span><br><span class="line">                      |                             |                     </span><br><span class="line">                      |                             |                     </span><br><span class="line">                      | Ki                          | Ki                  </span><br><span class="line">                      |                             |                     </span><br><span class="line">                      |                             |                     </span><br><span class="line">       Pi          +--v--+           Ci          +--v--+       Pi         </span><br><span class="line">------------------&gt;+ XOR +----------------------&gt;+ XOR +----------------&gt; </span><br><span class="line">                   +-----+                       +-----+                  </span><br><span class="line">                                                                          </span><br><span class="line">                   From Alice                    To Blob</span><br></pre></td></tr></table></figure>
<p>one-time pad 主要是靠 key 不重複使用來維護資料安全，但是雙方同時產生出相同的 random key 是很困難。由於不重複使用，靠一個 random key 的產生提供 random mask 消除明文和祕聞之間的關係。但是雙方都要相同 random key 是相當困難的，通常 generator 是由某個偽隨機數產生器，由演算法產生的到底是不是隨機數呢？</p>
<p>一定要 random key，不能有任何的 dependent、 <strong> 不能重複 (reuse) </strong>，否則會有 <strong> 已知明文攻擊 </strong>。</p>
<h3 id="Part-4"><a href="#Part-4" class="headerlink" title="Part 4"></a>Part 4</h3><p>ECB mode 在相同明文對應相同的密文，這容易受到大多數的攻擊，如收集已知明文或密文所進行的攻擊。由於明文和密文的關係明確，也因此在 <strong> 圖片資料 </strong> 加密傳送，會出現 <strong> 大量重複 </strong> 的密文。</p>
<p>CBC mode 提供 random mask 的效果</p>
<span>$$C_{-1} = IV \\
C_{i} = E_{k}(C_{i-1} \text{ XOR } P_{i}) \\$$</span><!-- Has MathJax -->
<p>從<span>$C_{i-1} \text{ XOR } P_{i}$</span><!-- Has MathJax --> 操作中可以發現到，讓相同的明文對應到不同的密文 (在前一個密文不同時)，解決 ECB 在相同明文加密只會對應種密文。</p>
<h3 id="Part-5"><a href="#Part-5" class="headerlink" title="Part 5"></a>Part 5</h3><p>Shannon’s idea 請參照 《資訊安全 小考筆記》</p>
<p>Feistel cipher structure 藉由三個規則實作</p>
<ul>
<li>多個回合 (round)</li>
<li>藉由一半的訊息加密另一半的訊息</li>
<li>兩個半段訊息位置交換</li>
</ul>
<h3 id="Part-6"><a href="#Part-6" class="headerlink" title="Part 6"></a>Part 6</h3><p>Avalanche effect 讓相似的明文 Pi, Pj (漢明距離 $H(Pi, Pj) = 1$ … 之類的) 對應的密文 Ci, Cj 能有相當大的差異 (漢明距離 $H(Ci, Cj) = \text{half-bit} $ 的期望值)，將只有一點不同的差異，擴散到密文的每個地方，放大差異的效果。</p>
<h3 id="Part-7"><a href="#Part-7" class="headerlink" title="Part 7"></a>Part 7</h3><p>Triple-DES</p>
<span>$E_{k_{1}}\left [ D_{k_{2}} \left [ E_{k_{1}} \left [ P_{i} \right ] \right ] \right ] = C_{i}$</span><!-- Has MathJax -->
<p>當指使用兩次的 DES，受到中間相遇法的攻擊，理論上的複雜度與 1 個 DES 一樣，複雜度大約都在 $O(2^{56})$，因此效果並沒有變得更好。然而在 Triple-DES 複雜度就提升到 $O(2^{112})$。</p>
<h4 id="中間相遇法攻擊"><a href="#中間相遇法攻擊" class="headerlink" title="中間相遇法攻擊"></a>中間相遇法攻擊</h4><span>$$X = D_{k_{2}} \left [ E_{k_{1}} \left [ P_{i} \right ] \right ] \\
C_{i} = E_{k_{1}} \left [ Y \right ]$$</span><!-- Has MathJax -->
<p>從已知的明文、密文，目標是讓 $X = Y$，窮舉 key，如果發生 $X = Y$ 則表示找到一組可行的解。窮舉得到 $X$ 的複雜度為 $O(2^{56} \times 2^{56}) = O(2^{112})$，而 $Y$ 則需要 $O(2^{56})$，當 $X = Y$ 符合時，則表示 key 找到！</p>
<p>當然也可以抽換相遇的地點，如下是另外一種</p>
<span>$$X = E_{k_{1}} \left [ P_{i} \right ] \\
C_{i} = E_{k_{1}} \left [ D_{k_{2}} \left [ Y \right ] \right ]$$</span><!-- Has MathJax -->
<p>不管怎麼切割，都至少要窮舉兩把 key 來得到其中一個相遇結果，複雜度都落在 $O(2^{112})$。如果說對應兩個表的結果需要 $O(log \text{ n})$ 的時間，則複雜度為 $O(112 \times 2^{112})$。</p>
<h3 id="Part-8"><a href="#Part-8" class="headerlink" title="Part 8"></a>Part 8</h3><table>
<thead>
<tr>
<th>Step</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>Substition Bytes</td>
<td>substitution</td>
</tr>
<tr>
<td>Shift Rows</td>
<td>diffusion</td>
</tr>
<tr>
<td>Mix Column</td>
<td>diffusion, substitution</td>
</tr>
<tr>
<td>Add Round Key</td>
<td>substitution</td>
</tr>
</tbody>
</table>
<p>比較討厭的是 Shift Rows 為什麼提供是 diffusion，明明對於兩個相似明文加密上，漢明距離沒有增加！但是 diffusion 不只是讓差異數量增加，還要考量差異位置的變動，相鄰差異的位置被轉移到兩個遠處，就能提供 diffusion！這會讓攻擊者無從判定差異的對應。</p>
<h3 id="Part-9"><a href="#Part-9" class="headerlink" title="Part 9"></a>Part 9</h3><p><a href="http://en.wikipedia.org/wiki/Blum_Blum_Shub" target="_blank" rel="external">Blum Blum Shub</a></p>
<span>$$X_{i} = X_{i-1}^2 \text{mod } N \\
N = p \times q \\
p, q \text{ is prime nubmer, } \\
p \equiv 3 (\text{mod } 4) \\
q \equiv 3 (\text{mod } 4)$$</span><!-- Has MathJax -->
<h3 id="Part-10"><a href="#Part-10" class="headerlink" title="Part 10"></a>Part 10</h3><p><strong> message dependent </strong> RC4</p>
<p>第一版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">i = j = 0, Cprev = 0</span><br><span class="line">for each message byte M</span><br><span class="line">    i = (i + 1) mod 256</span><br><span class="line">    j = (j + S[i]) mod 256</span><br><span class="line">    swap(S[i], S[j])</span><br><span class="line">    t = (S[i] + S[j] + Cprev) mod 256</span><br><span class="line">    C = M xor S[t]</span><br><span class="line">    if sender</span><br><span class="line">        Cprev = C</span><br><span class="line">    if receiver</span><br><span class="line">        Cprev = M</span><br></pre></td></tr></table></figure>
<p>好像不管怎麼寫兩邊似乎都很難相同。</p>
<p>第二版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = j = 0, C = 0</span><br><span class="line">for each message byte M</span><br><span class="line">    i = (i + C) mod 256</span><br><span class="line">    j = (j + S[i]) mod 256</span><br><span class="line">    swap(S[i], S[j])</span><br><span class="line">    t = (S[i] + S[j]) mod 256</span><br><span class="line">    C = M xor S[t]</span><br></pre></td></tr></table></figure>
<p>感覺上述的寫法，萬一 C 被竄改，會導致錯誤擴散，而且是全部失效，這讓我非常納悶。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-vr-note" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/27/vr-note/" class="article-date">
  <time datetime="2015-04-27T01:55:00.000Z" itemprop="datePublished">2015-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/27/vr-note/">虛擬實境 論文研讀 Part 1</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/04/27/vr-note/" data-id="cimun1kk000qon2xc6hbsx10z" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/04/27/vr-note/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <blockquote>
<p>期末上繳報告啊，不知道要寫多少才對得起自己。理解正確性不敢保證，相當可怕。</p>
</blockquote>
<h2 id="單詞概要"><a href="#單詞概要" class="headerlink" title="單詞概要"></a>單詞概要</h2><ul>
<li>Computed Tomography - 電腦斷層掃描 (X 光)，簡稱 CT</li>
<li>Shepp-Logan filter - 影像去噪中，一種運算操作</li>
<li>Delaunay - 計算幾何中 Delaunay Triangulation</li>
<li>ODT - optimal Delaunay Triangulation</li>
<li>Tetrahedron - 四面體</li>
<li>Isosufrface - 等價曲面</li>
<li>Truncate - 切去頭端</li>
<li>Hausdorff distance - 空間中，集合之間的距離描述 <a href="http://en.wikipedia.org/wiki/Hausdorff_distance" target="_blank" rel="external">wiki</a></li>
<li>Marching cubes - 用於 CT 模型，重建時的建構 3D 時，根據取樣點得到的最小構造單位。</li>
<li>QEM - Quadric Error Mactrics</li>
</ul>
<h2 id="本文"><a href="#本文" class="headerlink" title="本文"></a>本文</h2><p><strong><em> The Sinogram Polygonizer for Reconstructing 3D Shapes </em></strong> 這篇論文主要拿 Grid-base 掃描重建方法以及根據取樣點重建 3D 模型的算法探討。</p>
<p>首先從離散取樣中重建，最基礎的做法是根據 z-index 作切割，得到 xy 平面，在其上作 Grid-base 網格狀的取樣，得到座標 (x, y, z) 是否在該物體內部。</p>
<p>當取樣數量越多時，密集程度越高，能造就的邊緣就越明顯。藉由 Grid-base 取樣的缺點在於邊緣的凸顯仍然不夠明確於三角化，取樣點的數量必須非常多，才能表示非平行三軸的邊緣。</p>
<p>從 CT 圖中，掃描資料為數張正弦圖 (sinogram)，將一個物體放置於轉盤上，轉動轉盤將 X 光照射上去，根據物體的阻射程度得到正弦圖，相當於是光線投影到平面的強度 (CT value)。當一個物體只由一種材質構成時，其阻礙程度與阻礙光線的長度成線性關係，如此一來 CT value 就能有效地反應在物體表面的距離。</p>
<p>這裡補充一點，通常物體不會只由一個材質構成，因此在某些重建工作時會特別弱，如人體掃描重建，則會在眼睛材質上難以得到好的效果。阻礙能力會擴散到其他的正弦圖上，在複合材料的重建工作則會相對地困難。</p>
<p>CT 圖存在些許的干擾，受到鄰近材質的阻射影響。看到網路上文章寫到，即便現代的降噪算法相當厲害，對於醫院普遍使用的成像仍然使用幾十年前的算法，其最重要的原因是擔憂降噪算法捨棄掉的部分到底是不是正確的，去掉資訊若是重要的反而會造成判斷失誤，因此學術界使用 CT 圖的降噪算法仍然不普及於醫學界。</p>
<h3 id="CT"><a href="#CT" class="headerlink" title="CT"></a>CT</h3><p>目前 Shepp-Logan filter 相當好用，在 CT 去噪效果受到肯定！公式如下：</p>
<span>$$f(p) = \frac{1}{2} \int_{0}^{2 \pi} \alpha(R_\theta p)^{2} S_{\theta}(P(R_{\theta} p)) d \theta \\
S_{\theta}(q) \leftarrow \int_{-\infty }^{\infty} {\beta(\tilde{q}(x)) S_{\theta}(\tilde{q} (x)) h(x - (q)_{x})} dx \\
h(t) = 2 / (\pi^{2} \delta^{2}  - 4 t^{2}) \\$$</span><!-- Has MathJax -->
<p><span>$S_{\theta}(q)$</span><!-- Has MathJax --> 表示在轉盤角度為<span>$\theta$</span><!-- Has MathJax --> 時成像於 q 點的數值<span>$\beta(q) = cos(\angle qso)$</span><!-- Has MathJax -->，點 q 連線到光源 s、再連線到圓盤圓心點 o。並且<span>$\tilde{q}$</span><!-- Has MathJax --> 限定為與點 q 具有相同的 y 值，就是說對水平方向上鄰近點數值去噪<span>$\delta$</span><!-- Has MathJax --> 為取樣的像素大小於成像畫面。</p>
<p>從數學公式中看出，受到鄰近點<span>$\tilde{q}$</span><!-- Has MathJax --> 影響與光源的偏角差異、與點 q 的距離呈現的關係。</p>
<h4 id="補充-CT-重建"><a href="#補充-CT-重建" class="headerlink" title="補充 CT 重建"></a>補充 CT 重建</h4><p><a href="http://blog.csdn.net/shuangyue/article/details/5810789" target="_blank" rel="external">CT 重建方法</a> 中，存在三種常見的方式</p>
<ul>
<li>迭代法</li>
<li>反投影法 backprojection</li>
<li>濾波反投影法 filtered backprojection</li>
</ul>
<p>在掃瞄資料中，根據不同角度進行掃描投影，會得到數張 2D 影像，對於實際物體離散取樣，把每一個樣本都當作一個變數 $x_{i} $，根據模擬的方式，可以得到好幾條方程式，解出方程式後，就能知道每個位置上是否有實體 (在物體內部)。但是這樣的效能並不好，會有成千上萬的變數和方程式，甚至有可能發生多組解。</p>
<h5 id="迭代法"><a href="#迭代法" class="headerlink" title="迭代法"></a>迭代法</h5><p>迭代法提供一個逼近方法，類似模擬退火法的那種梯度迭代，每一次迭代逐漸將變數數值增加，增加後與實際投影比較，不斷地逼近投影實際值，捨棄掉不合法的數值，每迭代一次讓解更加地接近，當誤差小於某個定值後即可停止。這種作法通常會很慢，但迭代過程中可以加入很多彈性的參數變化，彈性較高。</p>
<h5 id="反投影法"><a href="#反投影法" class="headerlink" title="反投影法"></a>反投影法</h5><p>反投影法則是將投影值結果反投影回去，投影的 2D 影像上的某一個點的數值，會反投影到射線上的每一個點，多次反投影後。若該位置存在於物體中，則貢獻於投影像的次數會很多，因此反投影的累加的值也會比較高。接著給定閥值、誤差修正來判斷，效果會更為顯著。反投影法概念上非常簡單，但在邊緣的結果會很模糊。</p>
<h5 id="濾波反投影法"><a href="#濾波反投影法" class="headerlink" title="濾波反投影法"></a>濾波反投影法</h5><p>濾波反投影法這部分不是很理解，看起來是先利用 <strong> 卷積 </strong> (Convolution) 操作，再利用傅立葉卷積的反變換，變換過程中需要一個濾波器協助，反變換回來後，再進行反投影法。在傅立葉反變換中需要濾波器，因此選擇濾波器變得相當重要，本篇論文選的是 Shepp-Logan filter 來完成。濾波反投影法的優點是在於輪廓清楚，但會發生 <strong> 吉布斯現象 </strong> (Gibbs phenomenon)，逼近原圖時，不連續的函數截面附近會發生震盪。</p>
<h2 id="接續"><a href="#接續" class="headerlink" title="接續"></a>接續</h2><p>在濾波後，反投影後得到 CT value $f(p)$。當然 $f(p)$ 是一個連續函數的積分，事實上處理時離散的 (因為機器再怎麼精密，齒輪轉角也不會是連續，就看齒數多寡來決定)。</p>
<p>論文中用了 <strong> 迭代法 </strong> 和 <strong> 濾波反投影法 </strong> 重建比較，可以得到非常相似的結果。來確認使用的儀器是相當可靠的精準度。</p>
<p>接下來要進行建模，簡單會具有以下幾個步驟。</p>
<ol>
<li>可以決定要用幾個四面體構成。</li>
<li>三角網格藉由二值化 (CT value 來判定是在物體中還是外部) 抓取，並且加入四面體中。</li>
<li>三角網格到等值曲面的 QEM (Quadric Error Mactrics) 要最小化。</li>
<li>三角網格上的點座標，移動距離購小的時候，算法停止迭代。否則返回第二步，繼續鬆弛新的節點。</li>
</ol>
<p>第一步進行四面體構成時，通常會採用 <strong> Delaunay Tetrahedralization </strong> (相對於 2D 平面的 Delaunay Trianglution，Delaunay Trianglution 是由 2D Voronoi Diagram，那麼 Delaunay Tetrahedralization 就是由 3D Voronoi Diagram 搭建完成)，事實上還有數種建模的方法 (如 Marching cubes 之類的)，稍後有機會會提及到。但不管一開始選定的四面體採用哪種策略，經由往後的迭代，將會修整到差不多 QEM。</p>
<h3 id="邊緣擷取"><a href="#邊緣擷取" class="headerlink" title="邊緣擷取"></a>邊緣擷取</h3><p>對於每一個四面體，找到四面體的重心<span>$g_{i}$</span><!-- Has MathJax --> 並且計算 CT value $f(g_{i})$</p>
<p>對於相鄰的四面體，計算 $Tiso= (f(gi)+f(gj))/2$ 接下來要找等值曲面 $Tiso$，找到一個點 p 位於等值曲面上，並且 p 在 gi, gj 的連線上。對於 p 所在的等值曲面上計算法向量 $n_{k}$，等下要用來計算 QEM 用的。</p>
<h3 id="QEM"><a href="#QEM" class="headerlink" title="QEM"></a>QEM</h3><p>下篇待續</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-security-galois-field" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/25/security-galois-field/" class="article-date">
  <time datetime="2015-04-25T11:16:42.000Z" itemprop="datePublished">2015-04-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/資訊安全/">資訊安全</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/25/security-galois-field/">資訊安全 Galois Fields C++ 軟體實作體驗</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/04/25/security-galois-field/" data-id="cimun1k7d006yn2xc91zr5oqn" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/04/25/security-galois-field/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/密碼學/">密碼學</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>在 AES 中，利用 Galois fields<span>$GF(2^{8})$</span><!-- Has MathJax --> 為運算單位，有效地在 8-bits CPU 上高效地實作。</p>
<p>Galois Fields<span>$GF(p^{n})$</span><!-- Has MathJax --> 限定在質數 p 的 n 次方，便可存在有限的元素集合，支持加減乘除，同時可以利用 <strong> 擴充歐幾里算法 </strong> 得得到乘法反元素。從最簡單的 p = 2 開始看起，將 f(x) 視為一個元素。則</p>
<span>$$f(x) = a_{n-1}x^{n-1} + a_{n-2}x^{n-2} + ... + a_{1}x + a_{0} \\
a_{i} \in [0, p)$$</span><!-- Has MathJax -->
<p>當 p = 2 時，f(x) 就跟一般的二進制數字儲存相同。當選定在 p 的 n 次方時，必須找一個 degree = n 的多項式，不被集合內的任何元素整除，來約束所有的運算保持在一個大小內。特別的是當 p = 2 時，加法和減法是等價運算 (在 p = 2 下，1 乘法反元素是自己本身)。</p>
<p>AES 取 8-bits 作為運算單位的用意很多，其一反元素可以在極小空間內儲存，可以用查表的方式得到。之所以選定 p = 2 的好處在於計算機的儲存架構，若在某些特殊硬體可以支持三進位的情況下，p = 3 則會比較有效率的使用，不然取用 p = 3 在二進制的電腦架構，需要轉換的儲存單位是很沒效率，並且覆蓋的集合大小也沒辦法全部使用。</p>
<p>GF 有什麼好處呢？其一的道理在於加解密設計要 <strong> 防止線性關係 </strong> (線性代數太邪惡，很多種攻擊可以繞過線性關係的運算，拋開未知數也能求解)，對於 AES 的設計概念來說 GF 恰好符合這個條件。</p>
<h3 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h3><p>AES 選用<span>$GF(2^{8})$</span><!-- Has MathJax -->，並且取<span>$m(x) = x^8 + x^4 + x^3 + x + 1$</span><!-- Has MathJax --> 作為模數，然後再設計一個以 GF 作為常數類型的多項式 Polynominal</p>
<span>$f(x) = s_{3}x^{3} + s_{2}x^{2} + s_{1}x + s_{0}$</span><!-- Has MathJax -->
<p>每一個<span>$s_{i}$</span><!-- Has MathJax --> 都是一個 8-bits 的儲存單位，也就是說這個多項式是 32-bits 儲存。並且取用<span>$m(x) = x^4 + 1$</span><!-- Has MathJax --> 作為多項式的模數。AES 藉由 <strong> 多項式相乘 </strong>，將 4 個 8-bits 的資料交互影響產生出新的 4 個 8-bits，這在密碼學裡面造成 <strong> 雪崩效應 </strong>。</p>
<p>跟之前講的一樣，GF 一定存在反操作，也就是乘法反元素，因此取用<span>$03 x^{3} + 01 x^{2} + 01 x^{1} + 02$</span><!-- Has MathJax --> 其乘法反元素為<span>$0B x^{3} + 0D x^{2} + 09 x^{1} + 0E$</span><!-- Has MathJax -->。</p>
<p>接著，寫一個程式驗證反元素的計算吧！</p>
<blockquote>
<p>備註：GF 裡面套用 GF 相當有趣，感覺可以無限擴充大小，當然任意質數也可以找反元素，但也只有 <strong> 梅森質數 </strong> 比較適合在電腦二進制系統中吧？</p>
</blockquote>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no input</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">00 01 8D F6 CB 52 7B D1 E8 4F 29 C0 B0 E1 E5 C7</span><br><span class="line">74 B4 AA 4B 99 2B 60 5F 58 3F FD CC FF 40 EE B2</span><br><span class="line">3A 6E 5A F1 55 4D A8 C9 C1 0A 98 15 30 44 A2 C2</span><br><span class="line">2C 45 92 6C F3 39 66 42 F2 35 20 6F 77 BB 59 19</span><br><span class="line">1D FE 37 67 2D 31 F5 69 A7 64 AB 13 54 25 E9 09</span><br><span class="line">ED 5C 05 CA 4C 24 87 BF 18 3E 22 F0 51 EC 61 17</span><br><span class="line">16 5E AF D3 49 A6 36 43 F4 47 91 DF 33 93 21 3B</span><br><span class="line">79 B7 97 85 10 B5 BA 3C B6 70 D0 06 A1 FA 81 82</span><br><span class="line">83 7E 7F 80 96 73 BE 56 9B 9E 95 D9 F7 02 B9 A4</span><br><span class="line">DE 6A 32 6D D8 8A 84 72 2A 14 9F 88 F9 DC 89 9A</span><br><span class="line">FB 7C 2E C3 8F B8 65 48 26 C8 12 4A CE E7 D2 62</span><br><span class="line">0C E0 1F EF 11 75 78 71 A5 8E 76 3D BD BC 86 57</span><br><span class="line">0B 28 2F A3 DA D4 E4 0F A9 27 53 04 1B FC AC E6</span><br><span class="line">7A 07 AE 63 C5 DB E2 EA 94 8B C4 D5 9D F8 90 6B</span><br><span class="line">B1 0D D6 EB C6 0E CF AD 08 4E D7 E3 5D 50 1E B3</span><br><span class="line">5B 23 38 34 68 46 03 8C DD 9C 7D A0 CD 1A 41 1C</span><br><span class="line">03 x^3 + 01 x^2 + 01 x^1 + 02 x^0</span><br><span class="line">0B x^3 + 0D x^2 + 09 x^1 + 0E x^0</span><br><span class="line">00 x^3 + 00 x^2 + 00 x^1 + 01 x^0</span><br><span class="line">0B x^3 + 0D x^2 + 09 x^1 + 0E x^0</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>暴力實作，模擬運算，不考慮電路架構，用最樸素的方式儲存每一個欄位。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt; </span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">// in AES, GF(2^8), m(x) = x^8 + x^4 + x^3 + x + 1</span><br><span class="line">class GaloisField &#123;</span><br><span class="line">public:</span><br><span class="line">    unsigned char v[32];</span><br><span class="line">    int n;</span><br><span class="line">    GaloisField() &#123;</span><br><span class="line">        n = 8;</span><br><span class="line">        memset(v, 0, sizeof(v));</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField(int val) &#123;</span><br><span class="line">        n = 8;</span><br><span class="line">        memset(v, 0, sizeof(v));</span><br><span class="line">        for (int i = 0; i &lt; 8; i++)</span><br><span class="line">            v[i] = (val&gt;&gt;i)&amp;1;</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField(const int a[], int an) &#123;</span><br><span class="line">        memset(v, 0, sizeof(v));</span><br><span class="line">        n = 8;</span><br><span class="line">        for (int i = 0; i &lt;= an; i++)</span><br><span class="line">            v[i] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField operator+(const GaloisField &amp;a) const &#123;</span><br><span class="line">        GaloisField r;</span><br><span class="line">        for (int i = 0; i &lt;= r.n; i++)</span><br><span class="line">            r.v[i] = v[i] xor a.v[i];</span><br><span class="line">        r.normal();</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField operator-(const GaloisField &amp;a) const &#123;</span><br><span class="line">        return (*this) + a;</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField operator*(const GaloisField &amp;a) const &#123;</span><br><span class="line">        GaloisField r;</span><br><span class="line">        for (int i = 0; i &lt;= n; i++)</span><br><span class="line">            for (int j = 0; j &lt;= a.n; j++) </span><br><span class="line">                r.v[i+j] = r.v[i+j] xor (v[i] and a.v[j]);</span><br><span class="line">        r.normal();</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField shift(int sn) const &#123;</span><br><span class="line">        GaloisField r;</span><br><span class="line">        for (int i = 0; i &lt; n; i++)</span><br><span class="line">            r.v[i + sn] = v[i];</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    bool operator&lt;(const GaloisField &amp;a) const &#123;</span><br><span class="line">        for (int i = 16; i &gt;= 0; i--) &#123;</span><br><span class="line">            if (v[i] == 1 &amp;&amp; a.v[i] == 1)</span><br><span class="line">                return true;</span><br><span class="line">            if (v[i] == 1 &amp;&amp; a.v[i] == 0)</span><br><span class="line">                return false;</span><br><span class="line">            if (v[i] == 0 &amp;&amp; a.v[i] == 1)</span><br><span class="line">                return false;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField operator/(const GaloisField &amp;a) const &#123;</span><br><span class="line">        for (int i = 16; i &gt;= 0; i--) &#123;</span><br><span class="line">            if (a.v[i] == 1 &amp;&amp; v[i] == 0)</span><br><span class="line">                return GaloisField();</span><br><span class="line">            if (a.v[i] == 0 &amp;&amp; v[i] == 1)</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        GaloisField r, b = (*this), c;</span><br><span class="line">        </span><br><span class="line">        for (int i = n; i &gt;= 0; i--) &#123;</span><br><span class="line">            c = a.shift(i);</span><br><span class="line">            if (c &lt; b) &#123;</span><br><span class="line">                r.v[i] = 1;</span><br><span class="line">                for (int j = 16; j &gt;= 0; j--)</span><br><span class="line">                    b.v[j] = b.v[j] xor c.v[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        r.normal();</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField operator%(const GaloisField &amp;a) const &#123;</span><br><span class="line">        GaloisField ret = (*this) - (*this) / a * a;</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">    bool isZero() const &#123;</span><br><span class="line">        for (int i = 16; i &gt;= 0; i--)</span><br><span class="line">            if (v[i])	return 0;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    GaloisField inverse() &#123;</span><br><span class="line">        const int m[] = &#123;1, 1, 0, 1, 1, 0, 0, 0, 1&#125;, mn = 8; // m(x) = x^8 + x^4 + x^3 + x + 1</span><br><span class="line">        GaloisField y(m, mn);</span><br><span class="line">        GaloisField g, a, b;</span><br><span class="line">        </span><br><span class="line">        exgcd((*this), y, g, a, b); // a x + b y = g</span><br><span class="line">        return a;</span><br><span class="line">    &#125;</span><br><span class="line">    void exgcd(GaloisField x, GaloisField y, GaloisField &amp;g, GaloisField &amp;a, GaloisField &amp;b) &#123;</span><br><span class="line">        if (y.isZero()) &#123;</span><br><span class="line">            g = x, a = GaloisField(1), b = GaloisField(0);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            exgcd(y, x%y, g, b, a), b = b - (x / y) * a;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void normal() &#123;</span><br><span class="line">        const int m[] = &#123;1, 1, 0, 1, 1, 0, 0, 0, 1&#125;, mn = 8; // m(x) = x^8 + x^4 + x^3 + x + 1</span><br><span class="line">        for (int i = 16; i - mn &gt;= 0; i--) &#123;</span><br><span class="line">            if (v[i] == 1) &#123;</span><br><span class="line">                for (int j = mn, k = i; j &gt;= 0; j--, k--)</span><br><span class="line">                    v[k] = v[k] xor (m[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void print() const &#123;</span><br><span class="line">        for (int i = 7; i &gt;= 0; i--) &#123;</span><br><span class="line">            printf("%d", v[i]);</span><br><span class="line">            if (i%4 == 0)	printf(" ");</span><br><span class="line">        &#125;</span><br><span class="line">        puts("");</span><br><span class="line">    &#125;</span><br><span class="line">    int getHbits() const &#123;</span><br><span class="line">        return v[7]&lt;&lt;3 | v[6]&lt;&lt;2 | v[5]&lt;&lt;1 | v[4];</span><br><span class="line">    &#125;</span><br><span class="line">    int getLbits() const &#123;</span><br><span class="line">        return v[3]&lt;&lt;3 | v[2]&lt;&lt;2 | v[1]&lt;&lt;1 | v[0];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void testGF() &#123;</span><br><span class="line">    int va[] = &#123;1, 1, 1, 0, 1, 1, 0, 0&#125;;</span><br><span class="line">    int vb[] = &#123;0, 1, 0, 0, 0, 0, 1, 0&#125;;</span><br><span class="line">    for (int i = 0; i &lt; 256; i++) &#123;</span><br><span class="line">        GaloisField a(i);</span><br><span class="line">        GaloisField b = a.inverse();</span><br><span class="line">        printf("%X%X ", b.getHbits(), b.getLbits());</span><br><span class="line">        if (i%16 == 15) puts("");</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class GF_Polynominal &#123;</span><br><span class="line">public:</span><br><span class="line">    GaloisField v[32];</span><br><span class="line">    int n;</span><br><span class="line">    GF_Polynominal() &#123;</span><br><span class="line">        n = 4;</span><br><span class="line">        for (int i = 0; i &lt; 16; i++)</span><br><span class="line">            v[i] = GaloisField();</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal(const GaloisField a[], int an) &#123;</span><br><span class="line">        n = 4;</span><br><span class="line">        for (int i = 0; i &lt;= an; i++)</span><br><span class="line">            v[i] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal operator+(const GF_Polynominal &amp;a) const &#123;</span><br><span class="line">        GF_Polynominal r;</span><br><span class="line">        for (int i = 0; i &lt;= r.n; i++)</span><br><span class="line">            r.v[i] = v[i] + a.v[i];</span><br><span class="line">        r.normal();</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal operator-(const GF_Polynominal &amp;a) const &#123;</span><br><span class="line">        return (*this) + a;</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal operator*(const GF_Polynominal &amp;a) const &#123;</span><br><span class="line">        GF_Polynominal r;</span><br><span class="line">        for (int i = 0; i &lt;= n; i++)</span><br><span class="line">            for (int j = 0; j &lt;= a.n; j++) </span><br><span class="line">                r.v[i+j] = r.v[i+j] + (v[i] * a.v[j]);</span><br><span class="line">        r.normal();</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal shift(int sn) const &#123;</span><br><span class="line">        GF_Polynominal r;</span><br><span class="line">        for (int i = 0; i &lt; n; i++)</span><br><span class="line">            r.v[i + sn] = v[i];</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    bool operator&lt;(const GF_Polynominal &amp;a) const &#123;</span><br><span class="line">        for (int i = 8; i &gt;= 0; i--) &#123;</span><br><span class="line">            if (!v[i].isZero() &amp;&amp; !a.v[i].isZero())</span><br><span class="line">                return true;</span><br><span class="line">            if (v[i].isZero() != a.v[i].isZero())</span><br><span class="line">                return false;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal operator/(const GF_Polynominal &amp;a) const &#123;</span><br><span class="line">        for (int i = 8; i &gt;= 0; i--) &#123;</span><br><span class="line">            if (!a.v[i].isZero() &amp;&amp; v[i].isZero())</span><br><span class="line">                return GF_Polynominal();</span><br><span class="line">            if (a.v[i].isZero() &amp;&amp; !v[i].isZero())</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        GF_Polynominal r, b = (*this), c;</span><br><span class="line">        </span><br><span class="line">        for (int i = n; i &gt;= 0; i--) &#123;</span><br><span class="line">            c = a.shift(i);</span><br><span class="line">            if (c &lt; b) &#123;</span><br><span class="line">                GaloisField t, x, y;</span><br><span class="line">                for (int j = 16; j &gt;= 0; j--) &#123;</span><br><span class="line">                    if (!c.v[j].isZero()) &#123;</span><br><span class="line">                        y = c.v[j], x = b.v[j];</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                t = y.inverse() * x;</span><br><span class="line">//				b.print();</span><br><span class="line">//				c.print();</span><br><span class="line">//				printf("gg %d\n", i);</span><br><span class="line">//				y.print();</span><br><span class="line">//				x.print();</span><br><span class="line">//				y.inverse().print();</span><br><span class="line">//				t.print();</span><br><span class="line">                r.v[i] = t;</span><br><span class="line">                for (int j = 8; j &gt;= 0; j--)</span><br><span class="line">                    b.v[j] = b.v[j] - c.v[j] * t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">//		printf("---&gt; mod "); b.print();</span><br><span class="line">//		puts("");</span><br><span class="line">//		puts("div begin");</span><br><span class="line">//		print();</span><br><span class="line">//		a.print();</span><br><span class="line">//		r.print();</span><br><span class="line">//		(r * a).print();</span><br><span class="line">//		(r * a + b).print();</span><br><span class="line">//		puts("div end\n");</span><br><span class="line">        r.normal();</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal operator%(const GF_Polynominal &amp;a) const &#123;</span><br><span class="line">        GF_Polynominal ret = (*this) - (*this) / a * a;</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">    bool isZero() &#123;</span><br><span class="line">        for (int i = 8; i &gt;= 0; i--)</span><br><span class="line">            if (!v[i].isZero())	return 0;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    GF_Polynominal inverse() &#123;</span><br><span class="line">        const GaloisField m[] = &#123;GaloisField(1), GaloisField(0), GaloisField(0), GaloisField(0), GaloisField(1)&#125;;</span><br><span class="line">        const int mn = 4; // m(x) = x^4 + 1</span><br><span class="line">        GF_Polynominal y(m, mn);</span><br><span class="line">        GF_Polynominal g, a, b;</span><br><span class="line">        </span><br><span class="line">        exgcd((*this), y, g, a, b); // a x + b y = g</span><br><span class="line">        </span><br><span class="line">        return a / g;</span><br><span class="line">    &#125;</span><br><span class="line">    void exgcd(GF_Polynominal x, GF_Polynominal y, GF_Polynominal &amp;g, GF_Polynominal &amp;a, GF_Polynominal &amp;b) &#123;</span><br><span class="line">//		puts("exgcd -----------------");</span><br><span class="line">//		x.print();</span><br><span class="line">//		y.print();</span><br><span class="line">//		getchar();</span><br><span class="line">        if (y.isZero()) &#123;</span><br><span class="line">            const GaloisField m1[] = &#123;GaloisField(1)&#125;;</span><br><span class="line">            const GaloisField m0[] = &#123;GaloisField(0)&#125;;</span><br><span class="line">            g = x, a = GF_Polynominal(m1, 1), b = GF_Polynominal(m0, 1);</span><br><span class="line">            // a = g.inverse();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            exgcd(y, x%y, g, b, a), b = b - (x / y) * a;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void normal() &#123;</span><br><span class="line">        const GaloisField m[] = &#123;GaloisField(1), GaloisField(0), GaloisField(0), GaloisField(0), GaloisField(1)&#125;;</span><br><span class="line">        const int mn = 4; // m(x) = x^4 + 1</span><br><span class="line">        for (int i = 16; i - mn &gt;= 0; i--) &#123;</span><br><span class="line">            if (!v[i].isZero()) &#123;</span><br><span class="line">                GaloisField t = v[i];</span><br><span class="line">                for (int j = mn, k = i; j &gt;= 0; j--, k--)</span><br><span class="line">                    v[k] = v[k] - (m[j] * t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void print() const &#123;</span><br><span class="line">        for (int i = 3; i &gt;= 0; i--) &#123;</span><br><span class="line">            printf("%X%X ", v[i].getHbits(), v[i].getLbits());</span><br><span class="line">            printf("x^%d", i);</span><br><span class="line">            if (i)	printf(" + ");</span><br><span class="line">        &#125;</span><br><span class="line">        puts("");</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void testPoly() &#123;</span><br><span class="line">    const GaloisField m[] = &#123;GaloisField(2), GaloisField(1), GaloisField(1), GaloisField(3)&#125;;</span><br><span class="line">    const GaloisField m2[] = &#123;GaloisField(14), GaloisField(9), GaloisField(13), GaloisField(11)&#125;;</span><br><span class="line">    const int mn = 3, mn2 = 3;</span><br><span class="line">    GF_Polynominal a(m, mn), b(m2, mn2);</span><br><span class="line">    </span><br><span class="line">    a.print();</span><br><span class="line">    b.print();</span><br><span class="line">    </span><br><span class="line">    GF_Polynominal c = a * b;</span><br><span class="line">    c.print();</span><br><span class="line">    </span><br><span class="line">    GF_Polynominal d = a.inverse();</span><br><span class="line">    d.print();</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    testGF();</span><br><span class="line">    testPoly();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-security-notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/24/security-notes/" class="article-date">
  <time datetime="2015-04-24T02:37:28.000Z" itemprop="datePublished">2015-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/資訊安全/">資訊安全</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/24/security-notes/">資訊安全 小考筆記</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/04/24/security-notes/" data-id="cimun1k7a006qn2xc5k8pr2ef" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/04/24/security-notes/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/密碼學/">密碼學</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><ol>
<li><p>Follow</p>
<ol>
<li>What is a monoalphabetic cipher ?</li>
<li>How large is the key space of the monoalphabetic cipher applied to English (just consider lower case letters) ?</li>
<li>What is the main security weakness of a monoalphabetic cipher ?</li>
<li>Please provide at least 4 approaches to prevent the above weakness.</li>
</ol>
</li>
<li><p>Block ciphers process messages in blocks like an extremely large substitution, but this is very difficult to implement for a very big block size. What is Shannon’s idea to realize a block cipher with big block size ?</p>
</li>
<li><p>The S-box of DES round operation is not invertable, but why DES can decrypt ?</p>
</li>
<li><p>Follow</p>
<ol>
<li>Please explain the OFB mode.</li>
<li>In the OFB mode, we never reuse the same sequence (key+IV). If we reuse the key, then the attacker can recover message. Please describe very precisely (mathematiclly with symbols) how the attack works.</li>
</ol>
</li>
<li><p>Please compare the CFB mode the OFB mode by providing a table indicating at least 5 of their advantage and corresponding disadvantage.</p>
</li>
<li><p>This question is about issues of random access of encryption and decryption. Define notations or symbols you need before providing your answer. Please describe how to use CFB mode and CTR mode to randomly encrypt and decrypt a file Why OFB mode is inappropriate to randomly encrypt and decrypt a file?</p>
</li>
<li><p>Describe the details (as much as you remember) of AES operation and describe how efficiently implement AES on an 8-bit CPU ?</p>
</li>
<li><p>How avalanche happens in AES within the first tow rounds ?</p>
</li>
</ol>
<h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><h3 id="Part-1"><a href="#Part-1" class="headerlink" title="Part 1"></a>Part 1</h3><p>monoalphabetic cipher 簡單來說比凱薩加密難一點，從每個字母都 shift 固定的數量來說，變成變動式的。換句話說就是單純的英文字母替換 (substitute)。由於要維持可逆的解密，替換必須符合一對一，所以方法數為 <code>26! = 403291461126605635584000000</code>。</p>
<p>但這種替換方式容易受到語言統計的攻擊，也就是說在英文的特性中，不是每個字母都出現相同的頻率，因為很多冗詞的使用，導致有些字母會特別多。也因此在找對應時，可以藉由這一個觀點，反向查找可能的替換，大幅度地降低搜索可能，讓解密變得相當容易。</p>
<p>為了解決這一語言統計的攻擊，可以藉由</p>
<ul>
<li>壓縮明文，破壞語言特性，但是壓縮算法有儲存的字典部分，仍可能發生字典結構被攻擊，進而進行解壓縮。</li>
<li>增加垃圾字，撥點冗詞穿插在其中，把頻率不均的問題消彌。</li>
<li>多個字符一起加密，相對於單一字母的替換，可以同時替換兩個以上，如 <code>AA -&gt; WT</code> 之類的。</li>
<li>使用多種替換，在不同時刻使用不同的替換表，同樣地可以把頻率問題解決。</li>
<li>參照後續區段加密的一些技巧，如 CFB、OFB … 等，讓替換表進行變動。</li>
</ul>
<h3 id="Part-2"><a href="#Part-2" class="headerlink" title="Part 2"></a>Part 2</h3><p>區段加密具有相當大的強度，當一次加密 64 bits 時，可以達到的對應種類高達 <code>(2^64)!</code>，沒有辦法將這種表格存放在記憶體，因為也要消耗 <code>2^64</code> bits。</p>
<p>因此有 Shannon’s idea，利用 substitution (S-box)、permutation (P-box) 來完成對應，藉由 S-P 的組合，提供 混淆(confusion) 和 差異 (diffusion)。組合的效應遠比想像中的還大，儘管組合的方法數遠小於 <code>(2^64)!</code>，連兆分之一都不到，但簡單的概念可以在 <code>64KB</code> 記憶體大小內完成，效應上算相當划算。</p>
<h3 id="Part-3"><a href="#Part-3" class="headerlink" title="Part 3"></a>Part 3</h3><p>DES 的 S-box 屬於不可逆的操作 (8-bits to 6-bits)，然而 DES 在解密時，不需要將 S-box 往回推導，也就是不需要逆向操作，因為加密的 key 來自於 master key 和另一段的訊息 L(i) ，最後用 key 加密 R(i) 得到 L(i+1)。解密時，只需要將 R(i+1) (L(i) 會變成 S(i+1))帶入 S-box，就能重新產生出 key。</p>
<p>至於 DES 為什麼可以正確加解密，定義對於所有的任意明文 A, B，產生的密文 E(A) != E(B)。若明文差異在 L(i)，則在 R(i+1) 一定會不同。若明文差異在 R(i)，則在 key 相同，做 L(i+1) = R(i) XOR key 時，L(i+1) 也必定會不同。</p>
<h3 id="Part-4"><a href="#Part-4" class="headerlink" title="Part 4"></a>Part 4</h3><span>$$O_{i} = E_{k}(O_{i-1}); O_{-1} = IV \\
C_{i} = P_{i} \text{ XOR } O_{i}$$</span><!-- Has MathJax -->
<p>為什麼 OFB 不能重新使用 key + IV 呢？原因是因為 <strong> 已知明文攻擊 (Known plaintext attack) </strong> 。假設每一天都重新啟動，那麼攻擊者可以在事後得到密文對應的明文 (可能隔天才知道，儘管對應仍然是很難的)，那麼可以藉由數學概念來完成解密，無須考慮 key 是什麼內容。</p>
<span>$$C_{i} = P_{i} \text{ XOR } O_{i} \\
C_{j} = P_{j} \text{ XOR } O_{i} \\
C_{i} \text{ XOR } C_{j} = P_{i} \text{ XOR } P_{j}$$</span><!-- Has MathJax -->
<p>假設 i 和 j 重複使用 key，那麼會發生已知密文<span>$C_{i}, C_{j}$</span><!-- Has MathJax --> (傳輸上一定會被發現) 和已知明文<span>$P_{i}$</span><!-- Has MathJax -->，只要夾擊做 XOR，就可以直接得到<span>$P_{j}$</span><!-- Has MathJax -->，當已知明文相當長時，竊取的效果就越好。</p>
<h3 id="Part-5"><a href="#Part-5" class="headerlink" title="Part 5"></a>Part 5</h3><p>比較 CFB 和 OFB。</p>
<table>
<thead>
<tr>
<th>特性\模式</th>
<th>CFB</th>
<th>OFB</th>
</tr>
</thead>
<tbody>
<tr>
<td>自同步 (self-synchronization)</td>
<td>可</td>
<td>不可</td>
</tr>
<tr>
<td>錯誤擴散 (error propagation)</td>
<td>有</td>
<td>無</td>
</tr>
<tr>
<td>預先計算 (preprocess key)</td>
<td>不可</td>
<td>可</td>
</tr>
<tr>
<td>隨機存取 (random access)</td>
<td>可</td>
<td>不可</td>
</tr>
<tr>
<td>資訊安全性 (message security)</td>
<td>高</td>
<td>低</td>
</tr>
</tbody>
</table>
<ul>
<li><strong> 自同步 (self-synchronization) </strong>，不用告知對方加密狀態，可以藉由數次的傳輸訊息，自動地將兩邊的狀態一致，在此之前會造成一段雜訊。斷線時，不必重複使用 IV 讓兩邊同步 (狀態相同時，才能正確解密)。</li>
<li><strong> 錯誤擴散 (error propagation) </strong> ，也因為自同步的設計，導致在同步前都會有雜訊，或者在訊息被攻擊者竄改時，會影響該週期的狀態 (<span>$C_{i-k}, C_{i-k+1}, ..., C_{i-1}$</span><!-- Has MathJax --> )。</li>
<li><strong> 預先計算 (preprocess key) </strong> ，預先計算 key 可以加快加解密速度，同時便可支持平行運算，這原因是因為 message-independent/dependent 之間的差異，狀態不依靠正在傳遞的訊息時，就可以預先處理。</li>
<li><strong> 隨機存取 (random access) </strong> ，當要解析某個密文時，CFB 可以往前查找密文<span>$C_{i-k}, C_{i-k+1}, ..., C_{i-1}$</span><!-- Has MathJax -->，得到當前的解密器所需要的狀態，放上 master key 就能進行解密。OFB 辦不到這一點，狀態不依賴訊息，那就要知道當前是哪個回合，從 IV 開始推導狀態，若密文在第 n 個位置，需要 O(n) 的時間來得到狀態，相對於 CFB 的 O(k) = O(1)來說相當耗時。</li>
<li><strong> 資訊安全性 (message security) </strong> ，由於狀態與訊息獨立，會導致被攻擊者竄改內容時不易發現。在 CFB 中，由於依賴傳遞的訊息，當攻擊者竄改某個密文時會造成錯誤擴散，影響的解密時的明文不只一個，這也讓安全性提高。可以說是一體兩面的特性。</li>
</ul>
<h3 id="Part-6"><a href="#Part-6" class="headerlink" title="Part 6"></a>Part 6</h3><ul>
<li>CFB 狀態為 master key +<span>$C_{i-k}, C_{i-k+1}, ..., C_{i-1}$</span><!-- Has MathJax --></li>
<li>CTR 狀態為 master key + counter</li>
</ul>
<p>CFB 解密某個密文時，往前查找密文即可解密。CTR 知道密文 offset 便可得到 counter。在獲得資訊上都是 O(k) 常數，因此支持隨機存取。</p>
<blockquote>
<p>OFB 辦不到這一點，狀態不依賴訊息，那就要知道當前是哪個回合，從 IV 開始推導狀態，若密文在第 n 個位置，需要 O(n) 的時間來得到狀態，相對於 CFB 的 O(k) = O(1)來說相當耗時。</p>
</blockquote>
<p>CFB 和 CTR 到底誰的隨機存取能力好呢？若檔案儲存會切割成數個，那 CFB 的隨機存取能力就更高一點。CTR 必須計算 offset，相較於 CFB 的紀錄架構會稍微地麻煩。</p>
<h3 id="Part-7"><a href="#Part-7" class="headerlink" title="Part 7"></a>Part 7</h3><p>AES 的計算結構都落在 GF(2^8)，一個 cell 的內容都是 GF(2^8)</p>
<ul>
<li>substitue 需要 8-bits to 8-bits</li>
<li>shift rows 對於 8-bit 關聯不大 (移動記憶體的位置)</li>
<li>mixColume 上是 8-bits x 8-bits</li>
<li>add round key 對於每一個 cell XOR 8-bit keys</li>
</ul>
<p>因此 AES 可以在 8-bits CPU 上有更好的實作效能，所需要的 clock cycle 會比較短。</p>
<h3 id="Part-8"><a href="#Part-8" class="headerlink" title="Part 8"></a>Part 8</h3><p>假設有兩個明文的 <strong> 漢明距離 (Hamming distance) </strong> 為 1，在 128 bits 中有一個 1 bits 不同，意即<span>$H(P, Q) = 1$</span><!-- Has MathJax -->。</p>
<table>
<thead>
<tr>
<th>Step\Round</th>
<th>Round 1</th>
<th>Round 2</th>
</tr>
</thead>
<tbody>
<tr>
<td>Substitue bytes</td>
<td>4 bits</td>
<td>16 bits</td>
</tr>
<tr>
<td>Shift rows</td>
<td>4 bits</td>
<td>16 bits</td>
</tr>
<tr>
<td>Mix Columes</td>
<td>16 bits</td>
<td>64 bits</td>
</tr>
<tr>
<td>Add Round key</td>
<td>16 bits</td>
<td>64 bits</td>
</tr>
</tbody>
</table>
<ul>
<li>在 Substitue bytes 步驟時，S-box 會設計成期望當有一個 1-bits 不同，則替換出來的結果會有 4-bits 不同 (一個 cell 具有 8-bits。替換 8-bits 時，差異最少 0 bits、最多 8-bits，期望值是 4-bits)。</li>
<li>在 Shift rows 步驟時，單純移動 cell 不影響差異。</li>
<li>在 Mix Columes 步驟時，每一個 colume 會根據上一個 colume 的 4 個元素相互影響，因此會增加 4 倍。</li>
<li>在 Add Round key 步驟時，由於 XOR 相同的 key，因此差異並不會改變。</li>
</ul>
<p>最後，在 Round 2 時，能得到平均 64 bits 的差異。加密的明文一次 128 bits，差異期望值也就是一半的情況 64 bits，因此很快地就能達到期望的差異性。在隨後的 Round X 中，差異會在 64-bits 上下浮動都是有可能的。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-game-maker-design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/22/game-maker-design/" class="article-date">
  <time datetime="2015-04-21T23:15:21.000Z" itemprop="datePublished">2015-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/介面設計/">介面設計</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/22/game-maker-design/">Game Maker 遊戲介面設計</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/04/22/game-maker-design/" data-id="cimun1k4j002rn2xci5vgxlk8" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/04/22/game-maker-design/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/game/">game</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ui/">ui</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>學校課程番外篇，有興趣者可以查閱 <a href="https://github.com/morris821028/hw-GameMaker" target="_blank" rel="external">Github</a>。</p>
<h2 id="本文"><a href="#本文" class="headerlink" title="本文"></a>本文</h2><p>本課程一開始著重 <strong> 尼爾森法則 </strong> 的介面設計，不只是在網頁操作等介面設計，雖然遊戲沒有複雜的狀態跟操作流程，但在設計上的操作反應、都應該要符合尼爾森法則。</p>
<p>Game Maker 這套軟體只是製作 UI 方便，遊戲性跟高難度設計不是很著重，<strong> 不看你的代碼或實作複雜度 </strong>。這也是本課程最弔詭的地方。Game Maker 有一個缺點，製作時的分工無法按照軟體分工的方式，實作部分代碼來完成，除非組員們都會寫 script 並且了解語法的變數存取方式。</p>
<h2 id="從設計開始講起"><a href="#從設計開始講起" class="headerlink" title="從設計開始講起"></a>從設計開始講起</h2><p>可以從課程問卷中看到 <a href="https://github.com/morris821028/hw-GameMaker/blob/master/project/doc/game_questionnaire.md" target="_blank" rel="external">link</a> 幾個遵循的法則。</p>
<h3 id="Visibility-of-system-status"><a href="#Visibility-of-system-status" class="headerlink" title="Visibility of system status"></a>Visibility of system status</h3><p>狀態可視有幾格要點，玩家方便知道當前狀態，例如所在關卡、遊戲模式的狀態、角色資訊的狀態、完成關卡的結算畫面 … 等。</p>
<p><img src="http://i.imgur.com/RKM583h.png" alt="紅框位置處表示狀態"></p>
<p>同時在需要連續操作的完成流程，如銀行手續的設計，會顯示當前步驟進行到幾分之幾，來提示使用者其實還沒有完成所有步驟。然而在遊戲上，完成比例通常不是著重的一環，而是有哪關卡可以玩、有哪些關卡還沒去探訪過。</p>
<h3 id="Match-between-system-and-the-real-world"><a href="#Match-between-system-and-the-real-world" class="headerlink" title="Match between system and the real world"></a>Match between system and the real world</h3><p>主要為圖示運用，<a href="http://www.flaticon.com/packs/" target="_blank" rel="external">icon</a> 對應的操作符合普遍性，通常會遇到的第一個錯誤設計是將原本用在某個地方的圖示拿來放在不應擺放的位置。例如音樂撥放器的撥放、暫停、停止、前轉、循環、 … 等，很容易在選擇上誤用箭頭的格式。</p>
<p>接著是在文字對應，選項的文字也要具有普遍性，符合直觀的反應文字，詞性也應選擇恰當 (當心誤用形容詞當選項文字)，問題描述的正面詢問與反面詢問，反應在選擇選項時應足夠明確 (反問內容是否合理，不常見的反面詢問應該捨棄，防止使用者用既有概念進行操作)。</p>
<p>遊戲規則設計符合合理，當要貼切真實世界時，如物理反應與遊戲元素之間的關聯應該符合，如遊戲中運用到水和火，兩物體若發生碰撞，反應結果應符合消滅對方的關係。</p>
<h3 id="User-control-and-freedom"><a href="#User-control-and-freedom" class="headerlink" title="User control and freedom"></a>User control and freedom</h3><p>所謂的自由度，玩家不會被困在一本道的遊戲設計，但是在抖 M 類型的遊戲中，只要一失敗就必須從頭打起。玩家不會一直被系統帶著跑，而無法中斷、暫停遊戲，同時也表明重新步入遊戲時，可以選擇自己進行的模式。</p>
<p>自由度的操控有很多，客製化玩家的操作、給予玩家改變遊戲的部分設計，如鍵盤控制的改變、允許玩家更動角色的樣貌、樣式，可以更動關卡模式，例如 L4D2 可以選擇專家模式 … 等。</p>
<h3 id="Consistency-and-standards"><a href="#Consistency-and-standards" class="headerlink" title="Consistency and standards"></a>Consistency and standards</h3><p>一致性設計，相當於風格設計。</p>
<ul>
<li>按鈕的圖示在不同狀態若具有相同功能，使用圖示相同。</li>
<li>UI 擺放位置，不常因不同模式而更動 (突然放左、突然放右。)</li>
<li>文字字型的使用統一使用，並且區分遊戲劇情與系統介面，相同類型的文字說明應符合一致。</li>
</ul>
<h3 id="Error-prevention"><a href="#Error-prevention" class="headerlink" title="Error prevention"></a>Error prevention</h3><p>防止錯誤操作，當玩家已經在別款遊戲中擅長使用快捷鍵時，那很有可能在遊戲中使用快捷鍵操作，這可能會造成不預期的反應，如快速關閉遊戲、啟動某個遊戲的系統功能。</p>
<p>因此在防止錯誤，通常會用 <strong> 第二次詢問 </strong> 來防止。在快捷操作上，二次詢問要利用不同的快捷鍵觸發，防止連按的快速操作，如連按兩次 <code>ESC</code> 突然跳出遊戲的蠢事。</p>
<p>提示操作的後果也是相當重要，必須在文字說明上明確描述，盡可能使用簡短的句子和例子來說明操作後果。說明時著重使用者觀點，而非功能性介紹 (介紹對於使用者的感受可能會變成怎麼樣，而不去說明電腦架構的效能 … 等專業知識)。</p>
<p>當遊戲需要高度複雜的邏輯，導致道具使用上的 <strong> 順序性會影響流程 </strong>。當玩家處於無法通關的狀態時，提示哪個步驟錯誤，同時也告知玩家應該重新挑戰。這一類型就是引導提示。</p>
<h3 id="Recognition-rather-than-recall"><a href="#Recognition-rather-than-recall" class="headerlink" title="Recognition rather than recall"></a>Recognition rather than recall</h3><p>在遊戲功能分類上，遊戲道具的使用類型應該設計主動操作與被動操作，在欄位劃分上是其中一種設計。當空間不足與進行欄位劃分，在道具的背景、顏色上的區分是一個解決方案，例如用三角形的外框表示消耗型道具、六角形表示永久的增益型道具。<strong> 用圖示背景與位置來區分操作類型 </strong>，防範使用者如猴子般地等待道具效果。</p>
<h3 id="Flexibility-and-efficiency-of-use"><a href="#Flexibility-and-efficiency-of-use" class="headerlink" title="Flexibility and efficiency of use"></a>Flexibility and efficiency of use</h3><p>操作相當具有彈性跟有效地使用！</p>
<p>有些遊戲需要高度複雜的組合鍵來完成一個動作，同時也要求組合鍵的有效時間。先不論組合鍵的設計，若存在組合鍵，是否符合效率使用，是否可縮減成另一個指令，當分化深度歧異過大時，考量壓縮組合鍵的長度。例如有 5 個技能是由 3 個鍵組合觸發，4 個技能是由 5 個鍵組合觸發，壓縮到 4 個鍵以內 … 等。</p>
<p>正常情況下，有多少使用者會直觀這麼做，組合鍵設計是否合理，是否可以藉由 <strong> 系統輔助來簡化操作流程 </strong> ？這些考量將成為易上手，入門玩家最需要的部分。就如 vim 編輯器的使用，直接面向高端使用者，入門就會相當地困難。</p>
<h3 id="Aesthetic-and-minimalist-design"><a href="#Aesthetic-and-minimalist-design" class="headerlink" title="Aesthetic and minimalist design"></a>Aesthetic and minimalist design</h3><p>提示、排版設計，在 Apple 軟體看得很明顯，操作相當簡單，不會一次把很多功能塞在同一個頁面。在功能性很強的軟體，常常會把很多參數調校放在同一個頁面，而沒有做好區別與預設，即使功能性很強、軟體很好用，但很多功能反而會被忽略，由於沒有好的簡化設計，第一手想要嘗試的使用者，會跳過好幾個功能設定進行反饋。 <strong> 開發者開發的功能就白費了！ </strong></p>
<p>盡可能讓畫面簡潔，縮減不必要的進階資訊，用額外的方式體現，設計不同的介面模式。</p>
<h3 id="Help-users-recognize-diagnose-and-recover-from-errors"><a href="#Help-users-recognize-diagnose-and-recover-from-errors" class="headerlink" title="Help users recognize, diagnose, and recover from errors"></a>Help users recognize, diagnose, and recover from errors</h3><p>系統發生錯誤時，是否有足夠的資訊讓使用者查覺到 <strong> 不是遊戲正常設定 </strong>，來讓使用者回報這些程式設計 Bug。在系統設計的魯棒性，不應一個 Bug 產生而造成系統崩潰，遊戲也是一樣，讓使用者返回上一個正常的狀態，不會造成卡關、或者卡關之後遊戲損毀。</p>
<p>復原狀態對於小遊戲設計上相當困難啊！</p>
<h3 id="Game"><a href="#Game" class="headerlink" title="Game"></a>Game</h3><ul>
<li>故事劇情 (Storyline)</li>
<li>遊戲性 (GamePlay)</li>
<li>美學圖形 (Artistic/Graphics)</li>
<li>音效特效 (Sound/Special effects)</li>
<li>人工智慧 (AI)</li>
</ul>
<p>故事劇情可以結合真實部分，在真假交織下發展。</p>
<p>可以參考 <strong> 《额外加分 Extra Credits》 </strong> 、 <strong> 《TUN高品位低调宅》 </strong> 系列影片，這將會告訴你遊戲如何設計才具有特色。</p>
<p>下面列了兩個影片，更多可以直接去觀看 youtube 上的頻道。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=UjclHHR2hMk" target="_blank" rel="external">额外加分 Extra Credits：关联学习法</a></li>
<li><a href="https://www.youtube.com/watch?v=__BHBWhSw4g" target="_blank" rel="external">TUN高品位低调宅之黑暗之魂好在哪？</a></li>
</ul>
<p>其他的列點就是一種個人價值觀體現，還沒有詳細學習。</p>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><div class="video-container"><iframe src="//www.youtube.com/embed/In0U3oQJ1LI" frameborder="0" allowfullscreen></iframe></div>
<p>影片加速展示內容。</p>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><script type="text/javascript" src="http://morris821028.github.io/hexo-tag-oj/jquery.githubRepoWidget.js"></script><div class="github-widget" data-repo="morris821028/hw-GameMaker"></div>
<p>遊戲執行檔和開源代碼都在其中，當然還有遊戲的編輯器。更多的遊戲截圖在裡頭，只支持 windows 平台。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-security-block-ciphers" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/21/security-block-ciphers/" class="article-date">
  <time datetime="2015-03-21T01:42:36.000Z" itemprop="datePublished">2015-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/資訊安全/">資訊安全</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/21/security-block-ciphers/">區段加密筆記</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/03/21/security-block-ciphers/" data-id="cimun1k77006hn2xccqf2nlvc" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/03/21/security-block-ciphers/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/密碼學/">密碼學</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <blockquote>
<p>本篇筆記，僅為個人淺見</p>
</blockquote>
<h2 id="什麼是區段加密"><a href="#什麼是區段加密" class="headerlink" title="什麼是區段加密"></a>什麼是區段加密</h2><p>先了解 stream ciphers 和 block ciphers 的差異</p>
<ul>
<li><p>stream ciphers 特別在於加密用的 key 不斷地變更，並且以極少數的情況下重複使用，每一次加密針對一個 byte 或者是 bit 進行加密。加解密的兩方，可以同時產生出相同 random key。</p>
</li>
<li><p>block ciphers 只用同一份 key，把加密文件一次用一個 block 文字進行加密，利用換位 (位置交換)、替換 (文字替換) … 等方式，讓相似內容的明文，可以產出差異極大的密文 (訊息獨立)。</p>
</li>
</ul>
<p>從概念上，串流加密是絕對安全，如果雙方有辦法在不通訊下，可以產生出 random key，而且不重複使用 key，攻擊者會無從下手。但是現今很多 random 的產生方法仍然是演算法的數學模型，因此一定有規則。</p>
<p>而區段加密的好處，在於換位、替換、 … 等方式，將密文的相似度降低，即使明文長得很相似，攻擊者無法誘導相似明文的傳遞，導致 key 快速被發現，因為密文的差異性導致規則難以被破解。</p>
<h3 id="加密設計基礎原則"><a href="#加密設計基礎原則" class="headerlink" title="加密設計基礎原則"></a>加密設計基礎原則</h3><ul>
<li><p>confusion 困惑<br>密文跟 key 的關係盡可能混亂，根據加密的方式，有可能某些 key 會造成特殊的密文規則，這種弱 key 要不不存在、要不不使用。減少攻擊者對密文的觀察，就可以找到 key。</p>
</li>
<li><p>diffusion 散播<br>當明文相當相似時，也許只有幾個 bit 不同，產生出來的密文的差異性也要相當高，否則攻擊者可以推導加密原理，藉由 bitwise 將密文修改，讓解密者受到誤導。</p>
</li>
</ul>
<h2 id="Data-Encryption-Standard-DES"><a href="#Data-Encryption-Standard-DES" class="headerlink" title="Data Encryption Standard (DES)"></a>Data Encryption Standard (DES)</h2><ul>
<li>每一次加密 <strong> 64 </strong>-bit 的資料，用 <strong> 56 </strong>-bit 的 key。<br>這是一個很詭異的現象，通常 key 的長度會比 data 的長度來得大。</li>
<li>經過 16 回合的加密，並且每一個回合用 <strong> 56 </strong>-bit 的 key 產生出 <strong> 48 </strong>-bit 的 subkey 針對 <strong> 64 </strong>-bit 的資料加密。</li>
<li>加密過程會有擴充 subkey 和選擇一部分的 subkey，並且拿一部分的明文對 subkey 加密。</li>
</ul>
<p>將明文對切成兩個部分，一部分加密 subkey，另一部分根據加密過的 subkey 進行加密。在下一個回合，交換部分明文和部分密文的位置，讓所有的明文都進入到混亂狀態。</p>
<p>在解密時，知道 subkey 的產生規則，然後拿部分明文，加密 subkey 後，得到部分密文的加密要件，逆推回去。這一個繁複的過程，主要是製造 confusion，而 diffusion 的部分，則是在擴充 key 和拿部分明文加密 subkey 時，發生雪崩效應，因為拿部分明文進行加密 subkey，會造成 key 差異性放大。</p>
<p>儘管明文相似程度很高，卻會因為處理過程將差異轉移到 subkey 很多的位置的不同，經過輪替加密。無法利用頻率的方式，找到明文差異會造成密文的哪一個部分的差異。</p>
<h3 id="正確性"><a href="#正確性" class="headerlink" title="正確性"></a>正確性</h3><p>為什麼 DES 可以被正確解密？概念上，一個密文只能對應一個明文，這樣才符合正確解密的定義。因此不同的明文，也要產生出來不同的密文。</p>
<p>證明從輪替下手，部分明文 A 會保留到下一個輪替，而部分明文 A 會加密部分明文 B，假設兩個明文在 A 部分不同，則在密文部分就會不同 (因為保留)，假設是 B 部分不同，加密 (XOR 加密) 後也會不同。數學歸納法得證。</p>
<h3 id="加密強度分析"><a href="#加密強度分析" class="headerlink" title="加密強度分析"></a>加密強度分析</h3><p>因為 subkey 產生方式和換位、替換的規格是明定，與 key 無關。因此 key 長短將影響加密的強度，從現在分析 <strong> 56 </strong>-bit 在數個小時內就會被解出來。</p>
<blockquote>
<p>為什麼 subkey 產生方式和換位、替換的規格是明定？<br>因為雪崩效應的造成需要某些放大效果，因此表格要符合某些設計規則。</p>
</blockquote>
<h3 id="攻擊方法"><a href="#攻擊方法" class="headerlink" title="攻擊方法"></a>攻擊方法</h3><ul>
<li><p>Timing Attacks 加密時間攻擊，因為電腦運算的速度受輸入要件影響，如果 bit 變換數大，會導致加密時間拉長，藉以分析明文。</p>
</li>
<li><p>Power Attacks 偵測能源消耗，因為運算所需要的能量不同，隨著時間能到得到能源使用圖，就能分析加密過程的情況。也有為了防止這種偵測，考慮將所有運算做得一樣耗電，這有可能本末倒置。</p>
</li>
<li><p>Analytic Attacks 分析攻擊，從統計學的角度進行攻擊，從密文差異下手、從已知密文、明文解方程式、key 與加密結果的關聯性 … 等。</p>
</li>
</ul>
<h2 id="Block-mode"><a href="#Block-mode" class="headerlink" title="Block mode"></a>Block mode</h2><h3 id="ECB"><a href="#ECB" class="headerlink" title="ECB"></a>ECB</h3><p>Electronic CodeBook (ECB)，不變的 key，需要加密器和解密器，加解密的複雜度可能不同。</p>
<ul>
<li>優點：<br>構造簡單、容易實做</li>
<li>缺點：<br>長時間下，容易被偵測。影像資料的差異性不大，很容易被辨識到重複性，相較於文字很容易受前後文的影響。</li>
</ul>
<h3 id="CBC"><a href="#CBC" class="headerlink" title="CBC"></a>CBC</h3><p>Cipher Block Chaining (CBC)，不變的 key，以及前一個密文會先針對明文加密。</p>
<ul>
<li>優點：<br>相同明文，會因為前一個的密文不同造就出不同的密文，也就是加密器多一個新的狀態。</li>
<li>缺點：  <ul>
<li>一個密文 Ci 的錯誤，會導致兩個明文解析錯誤 (Pi &amp; Pi+1)。</li>
<li>第一次加密很容易被抽換 bitwise，因為每次驅動的 Initial Vector 都相同。</li>
</ul>
</li>
</ul>
<h3 id="CFB"><a href="#CFB" class="headerlink" title="CFB"></a>CFB</h3><p>Cipher FeedBack (CFB)，類似 CBC，但前一個密文的結果只影響一部分的加密關係，然後將前一段密文狀態加密 key，再對明文加密。</p>
<ul>
<li>優點：  <ul>
<li>支持即時 (real-time) 通訊</li>
<li>只需要加密器，加密做兩次相當於解密。</li>
<li>支持自同步 (self-synchronization)，即使中斷連線、訊息錯誤，可以在數個週期後再次同步運作。</li>
<li>藉由自同步的概念，可以捨棄掉 Initial Vector。</li>
<li>後半部的明文，可以透過週期性的部分密文建立解密狀態，支持 random access。</li>
</ul>
</li>
<li>缺點：<ul>
<li>error propagation 錯誤增長，當一個訊息錯誤時，需要好幾個週期後才能修正回來，這導致中間的解密訊息都不能用。</li>
<li>雜訊過多的情況下，不宜使用。</li>
</ul>
</li>
</ul>
<h3 id="OFB"><a href="#OFB" class="headerlink" title="OFB"></a>OFB</h3><p>Output FeedBack (OFB)，類似於 CFB，將前一段的加密 key 拿回來加密，不依賴接收的密文狀態。</p>
<ul>
<li>優點：  <ul>
<li>支持即時 (real-time) 通訊</li>
<li>只需要加密器，加密做兩次相當於解密。</li>
<li>相較於 CFB，沒有錯誤增長的情況。</li>
<li>依序使用的 key，可以事先算出來，然後依次使用。</li>
<li>雜訊下支持的能力好。</li>
</ul>
</li>
<li>缺點：<ul>
<li>必須一直保持同步</li>
<li>訊息被修改時，不易被發現，只單純影響單一明文 (沒有錯誤增長)。</li>
<li>起始狀態的 Initial Vector，不能重複使用，否則很容易被攻擊者抓到。</li>
<li>加設沒有預先算 key，沒辦法解密出後半部的明文。</li>
</ul>
</li>
</ul>
<h3 id="CTR"><a href="#CTR" class="headerlink" title="CTR"></a>CTR</h3><p>Counter (CTR)，類似於 OFB，直接利用計數器作為加密 key。</p>
<ul>
<li>優點：<ul>
<li>加解密可以平行化處理，如果加解密速度耗時，可以選擇這一種。</li>
<li>支持 random access。</li>
</ul>
</li>
<li>缺點：<ul>
<li>必須一直保持同步</li>
<li>訊息被修改時，不易被發現，只單純影響單一明文 (沒有錯誤增長)。</li>
<li>起始狀態的 Initial Vector，不能重複使用，否則很容易被攻擊者抓到。</li>
</ul>
</li>
</ul>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-bigdata-page-rank" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/09/bigdata-page-rank/" class="article-date">
  <time datetime="2015-03-09T00:00:15.000Z" itemprop="datePublished">2015-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/巨量資料/">巨量資料</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/09/bigdata-page-rank/">Page Rank 迭代計算 C++</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/03/09/bigdata-page-rank/" data-id="cimun1k2y000nn2xc835hg69v" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/03/09/bigdata-page-rank/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/馬可夫過程/">馬可夫過程</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>每一個網站都有超連結 (hyperlink) 到另一個網頁，因此會貢獻一部分的 page rank 給另一個網站，假想移動是隨機的，那麼轉移機會是 <code>1 / 出度</code>。</p>
<p>把網站之間的關係轉為 Graph，問題可以轉換成馬可夫過程。光是馬可夫過程，很容易造成 page rank 失算，因為有些點並沒有出度 (連接到別的網站)，數值就會隨著迭代集中到這個孤島上 (或者說蜘蛛網)，造成其他點的 page rank 皆為 0。為了防止這一點，給予 page rank 的總和<span>$S$</span><!-- Has MathJax -->，並且要求馬可夫過程，轉移只有<span>$\beta$</span><!-- Has MathJax --> 的信任度，剩餘的<span>$1 - \beta$</span><!-- Has MathJax --> 將隨機選擇全局的網站進行轉移。</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>每組第一行輸入兩個實數<span>$\beta$</span><!-- Has MathJax -->,<span>$S$</span><!-- Has MathJax -->。</p>
<p>第二行輸入一個整數 N，表示有多少個點。接下來會有 N 行，每一行的第一個數字，表示 i-th 點會連到其他網站的個數<span>$m_{i}$</span><!-- Has MathJax -->，接著同一行會有<span>$m_{i}$</span><!-- Has MathJax --> 個數字，表示連入的網站編號。</p>
<p>所有網站編號應為 0 … N-1。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0.7 3</span><br><span class="line">3</span><br><span class="line">2 1 2</span><br><span class="line">1 2</span><br><span class="line">1 2</span><br><span class="line">   </span><br><span class="line">0.85 3</span><br><span class="line">3</span><br><span class="line">2 1 2</span><br><span class="line">1 2</span><br><span class="line">1 0</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A 0.300</span><br><span class="line">B 0.405</span><br><span class="line">C 2.295</span><br><span class="line">   </span><br><span class="line">A 1.163</span><br><span class="line">B 0.644</span><br><span class="line">C 1.192</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>以下是簡單實作的結果。迭代 100 次，就能收斂程度就相當足夠。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt; </span><br><span class="line">#include &lt;math.h&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">// Markov process, math</span><br><span class="line">const int MAXN = 64;</span><br><span class="line">const int MAXIT = 100;</span><br><span class="line">struct Matrix &#123;</span><br><span class="line">    double v[MAXN][MAXN];</span><br><span class="line">    int row, col; // row x col</span><br><span class="line">    Matrix(int n, int m, int a = 0) &#123;</span><br><span class="line">        memset(v, 0, sizeof(v));</span><br><span class="line">        row = n, col = m;</span><br><span class="line">        for(int i = 0; i &lt; row &amp;&amp; i &lt; col; i++)</span><br><span class="line">            v[i][i] = a;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix operator*(const Matrix&amp; x) const &#123;</span><br><span class="line">        Matrix ret(row, x.col);</span><br><span class="line">        for(int i = 0; i &lt; row; i++) &#123;</span><br><span class="line">            for(int k = 0; k &lt; col; k++) &#123;</span><br><span class="line">                if (v[i][k])</span><br><span class="line">                    for(int j = 0; j &lt; x.col; j++) &#123;</span><br><span class="line">                        ret.v[i][j] += v[i][k] * x.v[k][j];</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix operator+(const Matrix&amp; x) const &#123;</span><br><span class="line">        Matrix ret(row, col);</span><br><span class="line">        for(int i = 0; i &lt; row; i++) &#123;</span><br><span class="line">            for(int j = 0; j &lt; col; j++) &#123;</span><br><span class="line">                ret.v[i][j] = v[i][j] + x.v[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix operator^(const int&amp; n) const &#123;</span><br><span class="line">        Matrix ret(row, col, 1), x = *this;</span><br><span class="line">        int y = n;</span><br><span class="line">        while(y) &#123;</span><br><span class="line">            if(y&amp;1)	ret = ret * x;</span><br><span class="line">            y = y&gt;&gt;1, x = x * x;</span><br><span class="line">        &#125;</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix powsum(int k) &#123;</span><br><span class="line">        if (k == 0) return Matrix(row, col, 0);</span><br><span class="line">        Matrix vv = powsum(k/2);</span><br><span class="line">        if (k&amp;1) &#123;</span><br><span class="line">            return vv * (Matrix(row, col, 1) + vv) + vv;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return vv * (Matrix(row, col, 1) + vv);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">#define eps 1e-6</span><br><span class="line">int cmpZero(double x) &#123;</span><br><span class="line">    if (fabs(x) &lt; eps)</span><br><span class="line">        return 0;</span><br><span class="line">    return x &lt; 0 ? -1 : 1;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    int N;</span><br><span class="line">    double beta, S;</span><br><span class="line">    while (scanf("%lf %lf", &amp;beta, &amp;S) == 2) &#123;</span><br><span class="line">        vector&lt;int&gt; g[MAXN], invg[MAXN];</span><br><span class="line">        scanf("%d", &amp;N);</span><br><span class="line">        for (int i = 0; i &lt; N; i++) &#123;</span><br><span class="line">            int M, x;</span><br><span class="line">            scanf("%d", &amp;M);</span><br><span class="line">            for (int j = 0; j &lt; M; j++) &#123;</span><br><span class="line">                scanf("%d", &amp;x);</span><br><span class="line">                g[i].push_back(x);</span><br><span class="line">                invg[x].push_back(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        Matrix r(N, 1);</span><br><span class="line">        for (int i = 0; i &lt; N; i++)</span><br><span class="line">            r.v[i][0] = 1.0 / N;</span><br><span class="line">        </span><br><span class="line">        for (int it = 0; it &lt; MAXIT; it++) &#123;</span><br><span class="line">            Matrix next_r(N, 1);</span><br><span class="line">            for (int i = 0; i &lt; N; i++) &#123;</span><br><span class="line">                for (int j = 0; j &lt; invg[i].size(); j++) &#123;</span><br><span class="line">                    int x = invg[i][j];</span><br><span class="line">                    next_r.v[i][0] += beta * r.v[x][0] / g[x].size();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            double sum = 0;</span><br><span class="line">            for (int i = 0; i &lt; N; i++)</span><br><span class="line">                sum += next_r.v[i][0];</span><br><span class="line">            for (int i = 0; i &lt; N; i++)</span><br><span class="line">                next_r.v[i][0] += (S - sum) / N;</span><br><span class="line">            r = next_r;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = 0; i &lt; N; i++)</span><br><span class="line">            printf("%c %.3lf\n", i + 'A', r.v[i][0]);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">0.7 3</span><br><span class="line">3</span><br><span class="line">2 1 2</span><br><span class="line">1 2</span><br><span class="line">1 2</span><br><span class="line"></span><br><span class="line">0.85 3</span><br><span class="line">3</span><br><span class="line">2 1 2</span><br><span class="line">1 2</span><br><span class="line">1 0</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-lesson/NLP-project" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/01/16/lesson/NLP-project/" class="article-date">
  <time datetime="2015-01-16T00:15:31.000Z" itemprop="datePublished">2015-01-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>►<a class="article-category-link" href="/categories/學校課程/自然語言/">自然語言</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/16/lesson/NLP-project/">自然語言處理 Project</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/01/16/lesson/NLP-project/" data-id="cimun1l0l01svn2xc2p51fzio" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/01/16/lesson/NLP-project/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自然語言/">自然語言</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="Polarity-Analysis-for-Sentiment-Classification"><a href="#Polarity-Analysis-for-Sentiment-Classification" class="headerlink" title="Polarity Analysis for Sentiment Classification"></a>Polarity Analysis for Sentiment Classification</h1><h2 id="Stop-Word-List"><a href="#Stop-Word-List" class="headerlink" title="Stop Word List"></a>Stop Word List</h2><p>This stopword list is probably the most widely used stopword list. It covers a wide number of stopwords without getting too aggressive and including too many words which a user might search upon. This wordlist contains only 11 words.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">the</span><br><span class="line">i</span><br><span class="line">it</span><br><span class="line">he</span><br><span class="line">she</span><br><span class="line">they</span><br><span class="line">we</span><br><span class="line">you</span><br><span class="line">-</span><br><span class="line">a</span><br><span class="line">an</span><br></pre></td></tr></table></figure>
<p>比起其他網路上的 stop word list 少了很多介系詞，原因是這樣的，例如 <code>who, whom, where, ...</code> 這些詞作為描述對象的主體，這些主體通常不可省略。例如在描述『演員很不錯，但是電影劇本很糟糕。』這段話時，根據實驗的幾種模型，如果忽略主體的存在，很容易造成描述的需求面向錯誤。必然地，無法將 <code>movie, film</code> 過濾掉，主體是相當重要的，即使他在單一詞的極性上不夠明確。</p>
<h2 id="Parsing-Sentence"><a href="#Parsing-Sentence" class="headerlink" title="Parsing Sentence"></a>Parsing Sentence</h2><p>首先，必須把所有縮寫單位展開，當然有可能把錯誤的 <code>Bob&#39;s</code> 展開成錯誤的意思，實驗上不構成多大的影響，但以下的操作會更明確地把潛在的 feature 更清楚地劃分，而不會挑到已經重複的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">`can&apos;t` = `can not`</span><br><span class="line">`n&apos;t` = ` not`</span><br><span class="line">`&apos;re` = ` are`</span><br><span class="line">`&apos;m` = ` am`</span><br><span class="line">`&apos;s` = ` is`</span><br><span class="line">`&apos;ve` = ` have`</span><br><span class="line">`&apos;ll` = ` will`</span><br><span class="line">... maybe more</span><br></pre></td></tr></table></figure>
<p>再來，必須針對符號轉英詞，有可能是在描述電影名稱會用到 <code>&amp;</code>，一律將其轉換成 <code>and</code> 會更有效。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`&amp;` = ` and`</span><br></pre></td></tr></table></figure>
<p>最後，語法上的變換統一。這可能會遭遇到描述『過去的版本很好，現在這個版本很糟。』也許規則應該對時間做點細部劃分。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`am, are, is, was, were` = `be`</span><br><span class="line">`no` = `not`</span><br><span class="line">`film` = `movie`</span><br></pre></td></tr></table></figure>
<p>更多的口語描述，例如 <code>uuuuuuuugggggggggglllllllllllyyyyyyy = ugly</code> 的可能，特別針對 long duplicate word 特別處理，查看濃縮之後，是否會在字典中。狀聲詞 <code>oh, wow, ah, ...</code> 可能是一個極性指標，在此就不濾掉這幾個單詞。</p>
<p>當使用 stop word 過濾某一個句子時，剩餘的詞應該串在一起成為新的句子，而不以 stop word 分開成新的句子。</p>
<h2 id="Filter-N-grams-Feature"><a href="#Filter-N-grams-Feature" class="headerlink" title="Filter N-grams Feature"></a>Filter N-grams Feature</h2><p>在挑選 n-grams 時，根據給定的公式，從 800 正向評論、800 反向評論中，大約會得到 50M ~ 100M 不同的 n-grams。當我們篩選 n = 3 時，<code>bad</code> 將可能被儲存為 <code>(bad, null, null)</code>。挑選時，必須保障 high order n-grams 佔有一定的數量，大約落在 <code>n-grams : (n+1)-grams = 7 : 3</code>。</p>
<p>評分時，額外增加 high order 的評分權重，以下是程式中使用的分配。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">N-grams Bonus = &#123;1, 1.02, 1.03, 1.04, 1.05, 1.06, 1.07&#125;;</span><br></pre></td></tr></table></figure>
<p>這麼做確保實驗上有保留之前的優良，同時也增加新的元素進去。</p>
<p>當挑選 K-top feature 時，必須將正反兩方的 feature N-grams 分別佔有約 50%，並且去掉同時挑到的情況。</p>
<p>更多的策略，例如 <code>(bad, too, null)</code> 可以視為 <code>(too, bad, null)</code>，使用 dag 的方式紀錄 N-grams。</p>
<h2 id="How-To-Decide-K-top"><a href="#How-To-Decide-K-top" class="headerlink" title="How To Decide K-top"></a>How To Decide K-top</h2><p>明顯地觀察到，K 越大時，Language Model 越穩定，平均效能穩定，但最好效能可能會下降，對於 Winnow algorithm 或者是 Passive-Aggressive algorithm 來說，feature vector 會非常大，造成在找到合適的參數會消耗更多的時間，並且難在有限的迭代次數中找到好的切平面。</p>
<p>當 K 很大時，部分的 n-grams 甚至只出現在某些的 training set 中，這造成訓練 Winnow, Passive-Aggressive 的結果並不好，過於分配無用的權重給只出現在 training set 的 feature。在實驗中，挑選 K = 30000 與 K = 50000 的差異並不大，挑選的比例約為 5% 以內。</p>
<h3 id="Improve"><a href="#Improve" class="headerlink" title="Improve"></a>Improve</h3><h4 id="LM-Classifier"><a href="#LM-Classifier" class="headerlink" title="LM Classifier"></a>LM Classifier</h4><p>關於論文中提到的 LM filter，試圖去替除掉一些主觀句子，根據每一個句子進行閥值的評測，實驗中測試到非常低的值作為閥值才具有較好的可能性，由於太高、太低都會使得準確度下降，估計這個閥值的調整不具有普遍性。</p>
<p>而其他的 Classifier 並沒有做這類的主客觀篩選，也許可以藉由主客觀句子的判斷做一套分類器，說不定可以改善另外兩個分類器的語意判斷能力。</p>
<h4 id="Combine-Classifier"><a href="#Combine-Classifier" class="headerlink" title="Combine Classifier"></a>Combine Classifier</h4><p>發現到 Winnow, Passive-Aggressive (PA) 都是以閥值作為判斷標準，因此當得到靠近閥值的數據下，判斷能力是相當脆弱。雖然 PA 在平均表現最好，大約落在 85% 附近，遠比 LM 和 Winnow 多了 5% ~ 10% 的準確度，如何加強？ </p>
<p>將四個 Classifier 串在一起，並且用八個 attribute 作為一個 feature vector，接著訓練這一個感知機。這八個 attribute 分別是每一個 Classifier 的判斷強度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(LM_POS, LM_NEG, WINNOW_POS, WINNOW_NEG, PA_POS, PA_NEG, SIMPLE_POS, SIMPLE_NEG)</span><br></pre></td></tr></table></figure>
<p>其中由於 Language Model (LM) 的機率不好量化，因此單純採用 0/1 的方式表示。嘗試過取 log 發現仍然並不好。</p>
<ul>
<li>LM_POS : if LM.classify(x) = POS, then LM_POS = 1. Otherwise LM_POS = 0</li>
<li>LM_NEG : if LM.classify(x) = NEG, then LM_NEG = 1. Otherwise LM_POS = 0</li>
<li>WINNOW_POS : if Winnow.classify(x) = POS, the WINNOW_POS = Winnow.strongClassify(x).</li>
<li>WINNOW_NEG : if Winnow.classify(x) = NEG, the WINNOW_NEG = Winnow.strongClassify(x).</li>
</ul>
<p>strongClassify(x) 從 training data 中得到 h(x) 的出現的最大值，然後根據將判斷的函數大小得到，<code>strongClassify(x) = h(x) / TRAINING_MAX_H_VALUE</code>，之所以不直接使用 <code>strongClassify(x) = h(x)</code> 是因為很容易造成 overflow 或者是過度的調整判斷。在實驗結果後，將後者公式調整為前者所使用的。</p>
<p>當然可以訓練多台，並且串在一起，但是這種串法必須盡可能有所歧異性，並不是串越多越好，可以藉較少次的迭代次數、洗牌後的訓練序列來達到歧異性。PA 具有良好的適應性，在訓練集與測資集大小、差異不大時，效能仍然可以保持著線性關係，相當具有魯棒性。 </p>
<p>在實驗觀察中可以明白感知器在越少 feature 下，可以在越少迭代次數中訓練完成，相對地適應能力就會隨差異嚴重波動，實驗中使用的幾個感知機模型，都能在 vector 得到後的幾秒內完成訓練，不用勞費 SVM 的數個小時。Language Model 則會因為 feature 越多，展現更加穩定的效能，即便如此，LM 在負面評論的辨識率仍然不高，這一點從論文中也可以看得出具有相同的現象。</p>
<p>藉此把 LM 對於負面評論辨識率很差的特性，才將其判斷與其他的感知機串在一起使用。這一類的串許多的分類器的算法，可以參照 Adaboost (Adaptive Boosting) 的想法。</p>
<h4 id="N-grams-Score"><a href="#N-grams-Score" class="headerlink" title="N-grams Score"></a>N-grams Score</h4><p>特別小心公式的計算，雖然有很多乘除法，可以使用 <code>Math.log</code> 降下來，防止 overflow 的可能，但同時也會造成嚴重的浮點數誤差。所以使用恰當的 <code>double</code> 運算即可，即使遇到 <code>NaN</code> 也沒有關係。</p>
<p>論文中提及的公式，額外增加變成</p>
<span>$\chi^{2}(t, c) = \frac{N \times (AD - CB)^{2} }{(A+C)\times (B + D) \times (A + B) \times (C + D)} \times Weight[t.getSize()] \times Score(t)$</span><!-- Has MathJax -->
<p>其中，<code>Weight[t.getSize()]</code> 正如上述的 <code>N-grams Bonus</code>，當最大上為 <code>n = 5</code> 時，部分 unigram、bigram 仍然有用。而 <code>Score(t)</code> 則是取額外資料中的 <code>AFINN-111.txt</code> 單詞正反面的絕對值權重和，有可能正負兩個詞合併成 bigram 來描述更強烈的負面，因此必須取絕對值。</p>
<h4 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h4><p>選擇 K-top feature n-grams 後，感知機的 Vector 如何放置權重仍然是個困難，從實驗中，單純拿 <code>n-grams appear times</code> 作為一個 attribute weight 效果並不好，於是嘗試拿 <code>Math.log(n-grams appear times)</code>，但是效果並不好，有可能是浮點數誤差造成的差異並不大，而 <code>Math.log</code> 本身就很小，尤其是 <code>n-grams appear times = 1</code> 的時候會變成 0，額外加上一個基底 base 來補足也拿以取捨。</p>
<p>最後取用</p>
<span>$vector[i] = Score(ngrams(i)) + \sqrt{n-grams(i) \text{ appear times}}$</span><!-- Has MathJax -->
<p>這部分仍然要做實驗，<code>Score(ngrams(i))</code> 大約落在 <code>1 ~ 10</code> 之間。</p>
<h4 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h4><p>經過幾次的 cross validation 後，每一次會挑到不同的 feature n-grams，藉由交叉驗證得到不同的精準度 P，同時也將挑選的 n-grams 增加 P 的權重，在實驗中總共做了 5 次 cross validation，針對同一組 800 資料，進行 <code>1 : 1</code> 的劃分。原本預期挑選 40K 個不同的 n-grams 作為 feature，但是經過 5 次實驗，總共得到 50K 個不同的 n-grams，根據累加的 P 值進行由大排到小，挑選 1/5 的 n-grams 出來，最後挑了少於 10K 個做為 feature。</p>
<p>針對已知的 1600 筆資料進行 <code>3 : 1</code> 的劃分，先對數量較多的資料重訓練，隨後才將數量較少放在一起做第二次訓練。防止過度的訓練，導致感知器針對訓練集的已知資訊分配過多的權重，反而針對未知的元素不足以判斷。</p>
<h2 id="extra-data-support"><a href="#extra-data-support" class="headerlink" title="extra data support"></a>extra data support</h2><ul>
<li>AFINN-111.txt</li>
<li>positive word list (ignore) 毫無幫助</li>
<li>negative word list (ignore) 毫無幫助</li>
<li>negation not (ignore) 目前發現只會更糟糕</li>
</ul>
<h1 id="程式撰寫"><a href="#程式撰寫" class="headerlink" title="程式撰寫"></a>程式撰寫</h1><h2 id="N-grams-Storing"><a href="#N-grams-Storing" class="headerlink" title="N-grams Storing"></a>N-grams Storing</h2><p><code>string</code> 轉 <code>integer</code> 標記。</p>
<h2 id="How-to-improve-experiment"><a href="#How-to-improve-experiment" class="headerlink" title="How to improve experiment"></a>How to improve experiment</h2><p>先用同一份資料訓練、測試，查看是否接近 <code>P = R = 100%</code>，接著放入未知的資料，找到挑選 feature n-grams 之間的差異。</p>
<p>列出幾個可能的差異後，從訓練的感知機中得到每一項的權重，由於是線性分類器，權重的大小即可作為是否具有特色，通常差距會達到 10 ~ 100 倍之間。即使從 N-grams score 得到較高的分數，從感知機中會發現到未必是較大的權重，有可能是某幾篇相關的電影所造成的一面倒。</p>
<h2 id="Pseudocode"><a href="#Pseudocode" class="headerlink" title="Pseudocode"></a>Pseudocode</h2><h3 id="preprocess"><a href="#preprocess" class="headerlink" title="preprocess"></a>preprocess</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">gobal_record(n-grams, score)</span><br><span class="line">for i  = 0 to CROSS_VALIDATION_MAX</span><br><span class="line">    shuffle_order(training_data)</span><br><span class="line">    (ttraining, ttest) = split(training_data, 1 : 1)</span><br><span class="line">    Vectraining = n-grams_sieve(ttraining)</span><br><span class="line">    (LM, Winnow, PA) = training(Vectraining)</span><br><span class="line">    P = test(LM, Winnow, PA, Vectraining)</span><br><span class="line">    gobal_record.add(P, Vectraining)</span><br><span class="line"> </span><br><span class="line">sort gobal_record(n-grams, score) by descending order.</span><br><span class="line">shuffle_order(training_data)</span><br><span class="line"></span><br><span class="line">(ttraining, tretain) = split(training_data, 4 : 1)</span><br><span class="line">N-gramsTable = gobel_record.sublist(K)</span><br><span class="line">Vectraining = parsingInput(ttraining,, N-gramsTable)</span><br><span class="line">Vecretain= parsingInput(tretain,, N-gramsTable)</span><br><span class="line"></span><br><span class="line">(LM, Winnow, PA) = training(Vectraining)</span><br><span class="line">(LM, Winnow, PA) = retraining(Vecretain)</span><br><span class="line"></span><br><span class="line">simpleTest(testdata, LM, Winnow, PA)</span><br><span class="line">onlineTest(testdata, LM, Winnow, PA)</span><br></pre></td></tr></table></figure>
<h3 id="online-test"><a href="#online-test" class="headerlink" title="online test"></a>online test</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GROUP_SIZE = 50</span><br><span class="line">groups = splitEach(testdata, GROUP_SIZE)</span><br><span class="line">foreach(group : groups)</span><br><span class="line">    appear set = find(group, N-gramsTable)</span><br><span class="line">    (LM, Winnow, PA) = retrainingLimited(Vectraining, appear set)</span><br><span class="line">    foreach(data : group)</span><br><span class="line">        classify(LM, Winnow, PA, data)</span><br></pre></td></tr></table></figure>
<h3 id="fail-online-test-idea"><a href="#fail-online-test-idea" class="headerlink" title="fail online test idea"></a>fail online test idea</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GROUP_SIZE = 10</span><br><span class="line">groups = splitEach(testdata, GROUP_SIZE)</span><br><span class="line">foreach(group : groups)</span><br><span class="line">    backtracking 210 possible solution</span><br><span class="line">        training &amp; test</span><br><span class="line">        if (better performance)</span><br><span class="line">            record solution.</span><br><span class="line">Work, but not helpful.</span><br></pre></td></tr></table></figure>
<h3 id="Support-N-grams-Sieve"><a href="#Support-N-grams-Sieve" class="headerlink" title="Support N-grams Sieve"></a>Support N-grams Sieve</h3><ul>
<li>AFINN-111.txt<br>The file AFINN-111.txt contains a list of sentiment scores</li>
<li>Stop word list<br>Small set, |S| &lt; 20</li>
<li>Synonymous “Not” list<br>unused</li>
<li>Abbreviation list<br>Rule, |R| &lt; 10</li>
<li>No CRF, No Parsing tree, No Subjective filter </li>
</ul>
<h1 id="To-Do"><a href="#To-Do" class="headerlink" title="To Do"></a>To Do</h1><p>增加兩個不在 top feature 中的 attribute，但是在 pos/neg word weight 中的 n-grams 所評分的結果。在量化這些 n-grams 的分數時，不管正反面的強度，一律取絕對值進行加總，有可能一個正面單詞跟一個負面單詞合併在一起來表示一個更強烈的正面或反面資訊。</p>
<p>Training Classifier with 5000 subjective and 5000 objective processed sentences.</p>
<p>實作判斷主觀、客觀的分類器。</p>
<p><a href="http://www.cs.cornell.edu/People/pabo/movie-review-data/" target="_blank" rel="external">http://www.cs.cornell.edu/People/pabo/movie-review-data/</a></p>
<h1 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h1><script type="text/javascript" src="http://morris821028.github.io/hexo-tag-oj/jquery.githubRepoWidget.js"></script><div class="github-widget" data-repo="morris821028/NLP-SentimentClassification"></div>
<p>感謝。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/學校課程/page/2/">&laquo; Prev</a><a class="page-number" href="/categories/學校課程/">1</a><a class="page-number" href="/categories/學校課程/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/categories/學校課程/page/4/">4</a><a class="page-number" href="/categories/學校課程/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/categories/學校課程/page/8/">8</a><a class="extend next" rel="next" href="/categories/學校課程/page/4/">Next &raquo;</a>
    </nav>
  
</section>
          
            <aside id="sidebar">
  <div id="ukagaka_panel"></div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">73</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">599</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">463</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">76</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">37</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2016/04/10/2016-google-code-jam-qr/">
              
                <i class="icon-file-o"></i> 
              
            2016 Google Code Jam Round QR</a>
          </li>
        
          <li>
            <a class="text" href="/2016/03/23/parallel-skill-interval-partitioning/">
              
                <i class="icon-file-o"></i> 
              
            數據分割 區間分塊小技巧</a>
          </li>
        
          <li>
            <a class="text" href="/2016/03/16/jg-10085/">
              
                <i class="icon-file-o"></i> 
              
            批改娘 10085. Parallel Count (debug)</a>
          </li>
        
          <li>
            <a class="text" href="/2016/03/16/jg-10084/">
              
                <i class="icon-file-o"></i> 
              
            批改娘 10084. Prefix Sum (pthread)</a>
          </li>
        
          <li>
            <a class="text" href="/2016/02/29/uva-13006/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13006 - Cake cut</a>
          </li>
        
          <li>
            <a class="text" href="/2016/02/29/uva-13010/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13010 - Galactic taxes</a>
          </li>
        
          <li>
            <a class="text" href="/2016/02/29/uva-13014/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13014 - Keep it energized</a>
          </li>
        
          <li>
            <a class="text" href="/2016/02/08/uva-13054/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13054 - Hippo Circus</a>
          </li>
        
          <li>
            <a class="text" href="/2016/02/08/uva-13032/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13032 - Marbles in Jars</a>
          </li>
        
          <li>
            <a class="text" href="/2016/02/02/uva-13038/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13038 - Directed Forest</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
      	<ul>
	      <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
	      <li><a href="http://flere114.blogspot.tw/" target="_blank" title="蘿莉勿觸"><i class="icon-googles"></i> flere's Blog</a></li>
	      <li><a href="http://dreamoon4.blogspot.tw/" target="_blank" title="夢月"><i class="icon-googles"></i> dreamoon's Blog</a></li>
	      <li><a href="http://m80126colin.github.io" target="_blank" title="許胖們"><i class="icon-github-alt"></i> m80126colin's Blog</a></li>
	      <li><a href="http://sd12582000.blogspot.tw/" target="_blank" title="妮可妮可"><i class="icon-github-alt"></i> Nico's Blog</a></li>
	      <li><a href="http://kuoe0.logdown.com/" target="_blank" title="郭至軒大神"><i class="icon-github-alt"></i> KuoE0's Dots</a></li>
	      <li><a href="http://tyan.io/" title=""><i class="icon-github-alt"></i> Tyan Blog</a></li>
    	</ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
<script type="text/javascript">
  $('#ukagaka_panel').ukagaka();
</script>
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://plus.google.com/u/0/108158678174364359204" target="_blank" title="Google+"><i class="icon-google-plus-sign"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2016 Shiang-Yun Yang 
    </div>  

  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div>

<!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
</body>
</html>