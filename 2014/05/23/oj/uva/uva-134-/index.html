<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>UVa 134 - Loglan-A Logical Language | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ProblemLoglan is a synthetic speakable language designed to test some of the fundamental problems of linguistics, such as the Sapir Whorf hypothesis. It is syntactically unambiguous, culturally neutra">
<meta property="og:type" content="article">
<meta property="og:title" content="UVa 134 - Loglan-A Logical Language">
<meta property="og:url" content="http://morris821028.github.io/2014/05/23/oj/uva/uva-134-/index.html">
<meta property="og:site_name" content="Morris' Blog">
<meta property="og:description" content="ProblemLoglan is a synthetic speakable language designed to test some of the fundamental problems of linguistics, such as the Sapir Whorf hypothesis. It is syntactically unambiguous, culturally neutra">
<meta property="og:updated_time" content="2016-04-20T11:50:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="UVa 134 - Loglan-A Logical Language">
<meta name="twitter:description" content="ProblemLoglan is a synthetic speakable language designed to test some of the fundamental problems of linguistics, such as the Sapir Whorf hypothesis. It is syntactically unambiguous, culturally neutra">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          <section id="main"><article id="post-oj/uva/uva-134-" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/23/oj/uva/uva-134-/" class="article-date">
  <time datetime="2014-05-23T00:08:43.000Z" itemprop="datePublished">2014-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      UVa 134 - Loglan-A Logical Language
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/23/oj/uva/uva-134-/" data-id="cipwal6ne02woxoxcgtrc2v7p" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/23/oj/uva/uva-134-/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LL-1/">LL(1)</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/編譯器/">編譯器</a></li></ul>

    </footer>
    <div class="article-entry " itemprop="articleBody">
      
          
              <div id="toc" class="toc-article">
              <h2 class="toc-title"><span>contents</span></h2>
              
                  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Problem"><span class="toc-number">1.</span> <span class="toc-text">Problem</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Input-and-Output"><span class="toc-number">2.</span> <span class="toc-text">Input and Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-input"><span class="toc-number">3.</span> <span class="toc-text">Sample input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-output"><span class="toc-number">4.</span> <span class="toc-text">Sample output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution"><span class="toc-number">5.</span> <span class="toc-text">Solution</span></a></li></ol>
              
              </div>
          
        
          <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Loglan is a synthetic speakable language designed to test some of the fundamental problems of linguistics, such as the Sapir Whorf hypothesis. It is syntactically unambiguous, culturally neutral and metaphysically parsimonious. What follows is a gross over-simplification of an already very small grammar of some 200 rules.</p>
<p>Loglan sentences consist of a series of words and names, separated by spaces, and are terminated by a period (.). Loglan words all end with a vowel; names, which are derived extra-linguistically, end with a consonant. Loglan words are divided into two classes–little words which specify the structure of a sentence, and predicates which have the form CCVCV or CVCCV where C represents a consonant and V represents a vowel (see examples later).</p>
<p>The subset of Loglan that we are considering uses the following grammar:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">A             →  a | e | i | o | u</span><br><span class="line">MOD           →  ga | ge | gi | go | gu</span><br><span class="line">BA            →  ba | be | bi | bo | bu</span><br><span class="line">DA            →  da | de | di | do | du</span><br><span class="line">LA            →  la | le | li | lo | lu</span><br><span class="line">NAM           →  &#123;all names&#125;</span><br><span class="line">PREDA         →  &#123;all predicates&#125;</span><br><span class="line">&lt;sentence&gt;    →  &lt;statement&gt; | &lt;predclaim&gt;</span><br><span class="line">&lt;predclaim&gt;   →  &lt;predname&gt; BA &lt;preds&gt; | DA &lt;preds&gt;</span><br><span class="line">&lt;preds&gt;       →  &lt;predstring&gt; | &lt;preds&gt; A &lt;predstring&gt;</span><br><span class="line">&lt;predname&gt;    →  LA &lt;predstring&gt; | NAM</span><br><span class="line">&lt;predstring&gt;  →  PREDA | &lt;predstring&gt; PREDA</span><br><span class="line">&lt;statement&gt;   →  &lt;predname&gt; &lt;verbpred&gt; &lt;predname&gt; | &lt;predname&gt; &lt;verbpred&gt;</span><br><span class="line">&lt;verbpred&gt;    →  MOD &lt;predstring&gt;</span><br></pre></td></tr></table></figure>
<p>Write a program that will read a succession of strings and determine whether or not they are correctly formed Loglan sentences.</p>
<h2 id="Input-and-Output"><a href="#Input-and-Output" class="headerlink" title="Input and Output"></a>Input and Output</h2><p>Each Loglan sentence will start on a new line and will be terminated by a period (.). The sentence may occupy more than one line and words may be separated by more than one whitespace character. The input will be terminated by a line containing a single `#’. You can assume that all words will be correctly formed.</p>
<p>Output will consist of one line for each sentence containing either <code>Good&#39; or</code>Bad!’.</p>
<h2 id="Sample-input"><a href="#Sample-input" class="headerlink" title="Sample input"></a>Sample input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">la mutce bunbo mrenu bi ditca.</span><br><span class="line">la fumna bi le mrenu.</span><br><span class="line">djan ga vedma le negro ketpi.</span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<h2 id="Sample-output"><a href="#Sample-output" class="headerlink" title="Sample output"></a>Sample output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Good</span><br><span class="line">Bad!</span><br><span class="line">Good</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>其實這一題有比較好的解法，但是在正在學編譯器，因此把 LL(1) parser 運用在此題<br>，所以代碼會稍微長一點。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;sentence&gt;    -&gt;  &lt;common_pre&gt;</span><br><span class="line">&lt;sentence&gt;    -&gt;  DA &lt;preds&gt;</span><br><span class="line">&lt;common_pre&gt;  -&gt;  &lt;predname&gt; &lt;suffix&gt;</span><br><span class="line">&lt;suffix&gt;      -&gt;  &lt;predclaim&gt;</span><br><span class="line">&lt;suffix&gt;      -&gt;  &lt;statement&gt;</span><br><span class="line">&lt;predclaim&gt;   -&gt;  BA &lt;preds&gt;</span><br><span class="line">&lt;preds&gt;       -&gt;  &lt;preds_head&gt; &lt;preds_tail&gt;</span><br><span class="line">&lt;preds_head&gt;  -&gt;  &lt;predstring&gt;</span><br><span class="line">&lt;preds_tail&gt;  -&gt;  A &lt;predstring&gt; &lt;preds_tail&gt;</span><br><span class="line">&lt;preds_tail&gt;  -&gt;  l</span><br><span class="line">&lt;predname&gt;    -&gt;  LA &lt;predstring&gt;</span><br><span class="line">&lt;predname&gt;    -&gt;  NAM</span><br><span class="line">&lt;predstring&gt;  -&gt;  PREDA &lt;predstr_tail&gt;</span><br><span class="line">&lt;predstr_tail&gt; -&gt; PREDA &lt;predstr_tail&gt;</span><br><span class="line">&lt;predstr_tail&gt; -&gt; l</span><br><span class="line">&lt;statement&gt;   -&gt;  &lt;verbpred&gt; &lt;statement_s&gt;</span><br><span class="line">&lt;statement_s&gt; -&gt;  &lt;predname&gt;</span><br><span class="line">&lt;statement_s&gt; -&gt;  l</span><br><span class="line">&lt;verbpred&gt;    -&gt;  MOD &lt;predstring&gt;</span><br></pre></td></tr></table></figure>
<p>為了要符合 LL(1) 的形式，要想辦法將 Grammar 符合規格，也就是每一條 production rule 的 predict set 不會有模稜兩個的情況，也就是說當我看到某個 non-terminal 在 stack 上，在去看下一個 token，然後可以對於 (non-terminal, token) 只找到一條規則去匹配。</p>
<p>predict set 是根據每一條 production rule 所產生的，也就是說這個推論可以產生的第一個 token 是什麼，假使有相同的前綴時，則必須拉出做調整。// 因為這將會造成模稜兩可的情況。</p>
<p>遇到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; BCx</span><br><span class="line">A -&gt; BCy</span><br></pre></td></tr></table></figure></p>
<p>應調整成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; BCW</span><br><span class="line">W -&gt; x</span><br><span class="line">W -&gt; y</span><br></pre></td></tr></table></figure></p>
<p>在 parsing 問題上，應避免替換的無限迴圈。<br>遇到<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; AC</span><br><span class="line">A -&gt; X</span><br><span class="line">A -&gt; Y</span><br></pre></td></tr></table></figure></p>
<p>應調整成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; WD</span><br><span class="line">D -&gt; CD</span><br><span class="line">D -&gt; lambda</span><br><span class="line">W -&gt; X</span><br><span class="line">W -&gt; Y</span><br></pre></td></tr></table></figure></p>
<p>發現對照課本的 parsing function 撰寫起來才發現有些不完善的地方，對於 <code>lldriver()</code> 會沒有辦法應對輸入結束，要吐出 lambda 的問題。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Production &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">string</span> 			LHS;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; 	RHS;</span><br><span class="line">        <span class="keyword">int</span> 			label;</span><br><span class="line">        </span><br><span class="line">        Production(<span class="built_in">string</span> L = <span class="string">""</span>, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; R = <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;()) &#123;</span><br><span class="line">            LHS = L;</span><br><span class="line">            RHS = R;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%s -&gt; "</span>, LHS.c_str());</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; RHS.size(); i++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%s"</span>, RHS[i].c_str());</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> Grammar &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">string</span> 		lambda;</span><br><span class="line">        <span class="built_in">string</span> 						start_symbol;</span><br><span class="line">        <span class="built_in">vector</span>&lt;Production&gt; 			rules;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; &gt; 	first_set;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; &gt; 	follow_set;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">bool</span>&gt; 			derives_lambda;</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">map</span>&lt;<span class="built_in">string</span>, Production&gt; &gt;	lltable;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">bool</span>&gt; mark_lambda();</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_first_set</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_follow_set</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">isNonterminal</span><span class="params">(<span class="built_in">string</span> token)</span></span>;</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; compute_first(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; rhs);</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; get_predict_set(Production p);</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_lltable</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">lldriver</span><span class="params">(<span class="built_in">queue</span>&lt;<span class="built_in">string</span>&gt; tokens)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">string</span> Grammar::lambda(<span class="string">"l"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; Grammar::compute_first(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; rhs) &#123;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; result;</span><br><span class="line">    <span class="keyword">size_t</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(rhs.size() == <span class="number">0</span> || rhs[<span class="number">0</span>] == Grammar::lambda) &#123;</span><br><span class="line">        result.insert(Grammar::lambda);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = first_set[rhs[<span class="number">0</span>]];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; rhs.size() &amp;&amp; </span><br><span class="line">            first_set[rhs[i<span class="number">-1</span>]].find(Grammar::lambda) != first_set[rhs[i<span class="number">-1</span>]].end(); i++) &#123;</span><br><span class="line">            <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; f = first_set[rhs[i]];</span><br><span class="line">            f.erase(Grammar::lambda);</span><br><span class="line">            result.insert(f.begin(), f.end());	</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i == rhs.size() </span><br><span class="line">            &amp;&amp; first_set[rhs[i<span class="number">-1</span>]].find(Grammar::lambda) != first_set[rhs[i<span class="number">-1</span>]].end()) &#123;</span><br><span class="line">            result.insert(Grammar::lambda);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.erase(Grammar::lambda);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * please call get_predict_set() after fill_follow_set() and fill_first_set()</span><br><span class="line"> */</span></span><br><span class="line"><span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; Grammar::get_predict_set(Production p) &#123;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; result;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; rfirst;</span><br><span class="line">    </span><br><span class="line">    rfirst = compute_first(p.RHS);</span><br><span class="line">    <span class="keyword">if</span>(rfirst.find(Grammar::lambda) != rfirst.end()) &#123;</span><br><span class="line">        rfirst.erase(Grammar::lambda);</span><br><span class="line">        result.insert(rfirst.begin(), rfirst.end());</span><br><span class="line">        rfirst = follow_set[p.LHS];</span><br><span class="line">        result.insert(rfirst.begin(), rfirst.end());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result.insert(rfirst.begin(), rfirst.end());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * </span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">void</span> Grammar::fill_lltable() &#123;</span><br><span class="line">    <span class="built_in">string</span>		A; <span class="comment">// nonterminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">        p = rules[i];</span><br><span class="line">        A = p.LHS;</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; predict_set = get_predict_set(p);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt;::iterator it = predict_set.begin();</span><br><span class="line">            it != predict_set.end(); it++) &#123;</span><br><span class="line">            assert(lltable[A].find(*it) == lltable[A].end());</span><br><span class="line">            lltable[A][*it] = p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> Grammar::isNonterminal(<span class="built_in">string</span> token) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(token[<span class="number">0</span>] == <span class="string">'&lt;'</span> &amp;&amp; token[token.length() - <span class="number">1</span>] == <span class="string">'&gt;'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">bool</span>&gt; Grammar::mark_lambda() &#123;</span><br><span class="line">    <span class="keyword">bool</span> 				rhs_derives_lambda;</span><br><span class="line">    <span class="keyword">bool</span> 				changes;</span><br><span class="line">    Production 			p;</span><br><span class="line">    </span><br><span class="line">    derives_lambda.clear();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* initially, nothing is marked. */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">        derives_lambda[rules[i].LHS] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">            p = rules[i];</span><br><span class="line">            <span class="keyword">if</span>(!derives_lambda[p.LHS]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(p.RHS.size() == <span class="number">0</span> || p.RHS[<span class="number">0</span>] == Grammar::lambda) &#123;</span><br><span class="line">                    changes = derives_lambda[p.LHS] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/* does each part of RHS derive lambda ? */</span></span><br><span class="line">                rhs_derives_lambda = derives_lambda[<span class="built_in">string</span>(p.RHS[<span class="number">0</span>])];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">1</span>; j &lt; p.RHS.size(); j++) &#123;</span><br><span class="line">                    rhs_derives_lambda &amp;= derives_lambda[p.RHS[j]];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(rhs_derives_lambda) &#123;</span><br><span class="line">                    changes = <span class="literal">true</span>;</span><br><span class="line">                    derives_lambda[p.LHS] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">    <span class="keyword">return</span> derives_lambda;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> Grammar::fill_first_set() &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">string</span> 		A; <span class="comment">// nonterminal</span></span><br><span class="line">    <span class="built_in">string</span> 		a; <span class="comment">// terminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    <span class="keyword">bool</span> 		changes;</span><br><span class="line">        </span><br><span class="line">    mark_lambda();</span><br><span class="line">    first_set.clear();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">        A = rules[i].LHS;</span><br><span class="line">        <span class="keyword">if</span>(derives_lambda[A])</span><br><span class="line">            first_set[A].insert(Grammar::lambda);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">0</span>; j &lt; rules[i].RHS.size(); j++) &#123;</span><br><span class="line">            a = rules[i].RHS[j];</span><br><span class="line">            <span class="keyword">if</span>(!isNonterminal(a)) &#123;</span><br><span class="line">                <span class="keyword">if</span>(a != Grammar::lambda)</span><br><span class="line">                    first_set[a].insert(a);</span><br><span class="line">                <span class="keyword">if</span>(j == <span class="number">0</span>) &#123; <span class="comment">// A -&gt; aXX</span></span><br><span class="line">                    first_set[rules[i].LHS].insert(a);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">            p = rules[i];</span><br><span class="line">            <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; rfirst = compute_first(p.RHS);</span><br><span class="line">            <span class="keyword">size_t</span> oldsize = first_set[p.LHS].size();</span><br><span class="line">            first_set[p.LHS].insert(rfirst.begin(), rfirst.end());</span><br><span class="line">            <span class="keyword">size_t</span> newsize = first_set[p.LHS].size();</span><br><span class="line">            <span class="keyword">if</span>(oldsize != newsize)</span><br><span class="line">                changes = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Grammar::fill_follow_set() &#123;</span><br><span class="line">    <span class="built_in">string</span> 	A, B; <span class="comment">// nonterminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    <span class="keyword">bool</span> 	changes;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">        A = rules[i].LHS;</span><br><span class="line">        follow_set[A].clear();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    follow_set[start_symbol].insert(Grammar::lambda);</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.size(); i++) &#123;</span><br><span class="line">            <span class="comment">/* A -&gt; a B b</span><br><span class="line">             * I.e. for each production and each occurrence</span><br><span class="line">             * of a nonterminal in its right-hand side. </span><br><span class="line">             */</span></span><br><span class="line">            p = rules[i];</span><br><span class="line">            A = p.LHS;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">0</span>; j &lt; p.RHS.size(); j++) &#123;</span><br><span class="line">                B = p.RHS[j];</span><br><span class="line">                <span class="keyword">if</span>(isNonterminal(B)) &#123;</span><br><span class="line">                    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; beta(p.RHS.begin() + j + <span class="number">1</span>, p.RHS.end());</span><br><span class="line">                    <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; rfirst = compute_first(beta);</span><br><span class="line">                    <span class="keyword">size_t</span> oldsize = follow_set[B].size();</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span>(rfirst.find(Grammar::lambda) == rfirst.end()) &#123;</span><br><span class="line">                        follow_set[B].insert(rfirst.begin(), rfirst.end());	</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        rfirst.erase(Grammar::lambda);</span><br><span class="line">                        follow_set[B].insert(rfirst.begin(), rfirst.end());	</span><br><span class="line">                        rfirst = follow_set[A];</span><br><span class="line">                        follow_set[B].insert(rfirst.begin(), rfirst.end());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">size_t</span> newsize = follow_set[B].size();			</span><br><span class="line">                    <span class="keyword">if</span>(oldsize != newsize)</span><br><span class="line">                        changes = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Grammar::lldriver(<span class="built_in">queue</span>&lt;<span class="built_in">string</span>&gt; tokens) &#123;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="built_in">string</span>&gt; 	stk;</span><br><span class="line">    <span class="built_in">string</span> 			X;</span><br><span class="line">    <span class="built_in">string</span>			a;</span><br><span class="line">    Production		p;</span><br><span class="line">    <span class="comment">/* Push the Start Symbol onto an empty stack */</span></span><br><span class="line">    stk.push(start_symbol);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(!stk.empty() &amp;&amp; !tokens.empty()) &#123;</span><br><span class="line">        X = stk.top();</span><br><span class="line">        a = tokens.front();</span><br><span class="line">        <span class="comment">// cout &lt;&lt; X &lt;&lt; " " &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(isNonterminal(X) &amp;&amp; lltable[X].find(a) != lltable[X].end()) &#123;</span><br><span class="line">            p = lltable[X][a];</span><br><span class="line">            stk.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = p.RHS.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span>(p.RHS[i] == Grammar::lambda)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                stk.push(p.RHS[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(X == a) &#123;</span><br><span class="line">            stk.pop();</span><br><span class="line">            tokens.pop();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(lltable[X].find(Grammar::lambda) != lltable[X].end()) &#123;</span><br><span class="line">            stk.pop();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/* Process syntax error. */</span></span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">"Bad!"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!stk.empty()) &#123;</span><br><span class="line">        X = stk.top();</span><br><span class="line">        <span class="keyword">if</span>(lltable[X].find(Grammar::lambda) != lltable[X].end())</span><br><span class="line">            stk.pop();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(tokens.size() == <span class="number">0</span> &amp;&amp; stk.size() == <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">"Good"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">"Bad!"</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">aVowel</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(c) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'a'</span>:<span class="keyword">case</span> <span class="string">'e'</span>:<span class="keyword">case</span> <span class="string">'i'</span>:<span class="keyword">case</span> <span class="string">'o'</span>:<span class="keyword">case</span> <span class="string">'u'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">token2symbol</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = str.length();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">islower</span>(str[n - <span class="number">1</span>]) || !aVowel(str[n - <span class="number">1</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"NAM"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (n) &#123;</span><br><span class="line">    	<span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">return</span> <span class="string">"A"</span>;</span><br><span class="line">    	<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        n = aVowel(str[<span class="number">4</span>]);</span><br><span class="line">        n |= ((aVowel(str[<span class="number">0</span>]) &lt;&lt; <span class="number">4</span>) | (aVowel(str[<span class="number">1</span>]) &lt;&lt; <span class="number">3</span>));</span><br><span class="line">        n |= ((aVowel(str[<span class="number">2</span>]) &lt;&lt; <span class="number">2</span>) | (aVowel(str[<span class="number">3</span>]) &lt;&lt; <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> (n == <span class="number">5</span> || n == <span class="number">9</span>) ? <span class="string">"PREDA"</span> : <span class="string">"UN"</span>;</span><br><span class="line">    	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        	<span class="keyword">switch</span> (str[<span class="number">0</span>]) &#123;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">'g'</span>: <span class="keyword">return</span> <span class="string">"MOD"</span>;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">'b'</span>: <span class="keyword">return</span> <span class="string">"BA"</span>;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">'d'</span>: <span class="keyword">return</span> <span class="string">"DA"</span>;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">'l'</span>: <span class="keyword">return</span> <span class="string">"LA"</span>;</span><br><span class="line">        	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"UN"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">parsingProduction</span><span class="params">(<span class="built_in">string</span> r, Grammar &amp;g)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> 		production_label = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="built_in">stringstream</span> 	<span class="title">sin</span><span class="params">(r)</span></span>;</span><br><span class="line">    <span class="built_in">string</span> 			lhs, foo;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; 	tokens;</span><br><span class="line">    <span class="built_in">sin</span> &gt;&gt; lhs &gt;&gt; foo;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">sin</span> &gt;&gt; foo)</span><br><span class="line">        tokens.push_back(foo);</span><br><span class="line">    <span class="function">Production <span class="title">p</span><span class="params">(lhs, tokens)</span></span>;</span><br><span class="line">    p.label = ++production_label;</span><br><span class="line">    g.rules.push_back(p);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Grammar g;</span><br><span class="line">    parsingProduction(<span class="string">"&lt;sentence&gt;    -&gt;  &lt;common_pre&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;sentence&gt;    -&gt;  DA &lt;preds&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;common_pre&gt;  -&gt;  &lt;predname&gt; &lt;suffix&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;suffix&gt;      -&gt;  &lt;predclaim&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;suffix&gt;	  	 -&gt;  &lt;statement&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;predclaim&gt;   -&gt;  BA &lt;preds&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;predclaim&gt;   -&gt;  DA &lt;preds&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;preds&gt;       -&gt;  &lt;preds_head&gt; &lt;preds_tail&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;preds_head&gt;  -&gt;  &lt;predstring&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;preds_tail&gt;  -&gt;  A &lt;predstring&gt; &lt;preds_tail&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;preds_tail&gt;  -&gt;  l"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;predname&gt;    -&gt;  LA &lt;predstring&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;predname&gt;    -&gt;  NAM"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;predstring&gt;  -&gt;  PREDA &lt;predstr_tail&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;predstr_tail&gt; -&gt; PREDA &lt;predstr_tail&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;predstr_tail&gt; -&gt; l"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;statement&gt;   -&gt;  &lt;verbpred&gt; &lt;statement_s&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;statement_s&gt; -&gt;  &lt;predname&gt;"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;statement_s&gt; -&gt;  l"</span>, g);</span><br><span class="line">    parsingProduction(<span class="string">"&lt;verbpred&gt;    -&gt;  MOD &lt;predstring&gt;"</span>, g);</span><br><span class="line">    </span><br><span class="line">    g.start_symbol = <span class="string">"&lt;sentence&gt;"</span>;</span><br><span class="line">        </span><br><span class="line">    g.fill_first_set();</span><br><span class="line">    g.fill_follow_set();</span><br><span class="line">    g.fill_lltable();</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="built_in">string</span>&gt; SYMBOL;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">string</span> token; <span class="built_in">cin</span> &gt;&gt; token &amp;&amp; token != <span class="string">"#"</span>;) &#123;</span><br><span class="line">        <span class="keyword">size_t</span> pos = token.find(<span class="string">'.'</span>);</span><br><span class="line">        <span class="keyword">if</span>(pos == <span class="built_in">string</span>::npos) &#123;</span><br><span class="line">            SYMBOL.push(token2symbol(token));</span><br><span class="line">            <span class="comment">//cout &lt;&lt; token2symbol(token) &lt;&lt; " ";</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        token.erase(token.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//cout &lt;&lt; token2symbol(token) &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(token.length() &gt; <span class="number">0</span>)</span><br><span class="line">            SYMBOL.push(token2symbol(token));</span><br><span class="line">        g.lldriver(SYMBOL);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(!SYMBOL.empty())</span><br><span class="line">            SYMBOL.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/05/24/lesson/hw-nachos4/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          向 NachOS 4.0 作業進發 (1)
        
      </div>
    </a>
  
  
    <a href="/2014/05/22/note/hardware-interview/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">大神面試紀錄 Hardware Interview</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
          
            <aside id="sidebar">
  <div id="ukagaka_panel"></div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">88</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">617</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">479</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">76</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">39</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2016/06/26/jg-10092/">
              
                <i class="icon-file-o"></i> 
              
            批改娘 10092. OpenCL Build Program Debug</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/26/jg-10091/">
              
                <i class="icon-file-o"></i> 
              
            批改娘 10091. Fast Matrix Multiplication (OpenCL)</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/26/jg-10090/">
              
                <i class="icon-file-o"></i> 
              
            批改娘 10090. Dot Product (OpenCL)</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/26/jg-10089/">
              
                <i class="icon-file-o"></i> 
              
            批改娘 10089. Print Platform Information (OpenCL)</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/26/uva-13100/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13100 - Painting the Wall</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/26/uva-13102/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13102 - Tobby Stones</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/26/uva-13101/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13101 - Tobby on Tree</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/24/uva-13000/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13000 - VIP Treatment</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/24/uva-13070/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13070 - Palm trees in the snow</a>
          </li>
        
          <li>
            <a class="text" href="/2016/06/24/uva-13036/">
              
                <i class="icon-file-o"></i> 
              
            UVa 13036 - Birthday Gift to SJ - 2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
      	<ul>
	      <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
	      <li><a href="http://flere114.blogspot.tw/" target="_blank" title="蘿莉勿觸"><i class="icon-googles"></i> flere's Blog</a></li>
	      <li><a href="http://dreamoon4.blogspot.tw/" target="_blank" title="夢月"><i class="icon-googles"></i> dreamoon's Blog</a></li>
	      <li><a href="http://m80126colin.github.io" target="_blank" title="許胖們"><i class="icon-github-alt"></i> m80126colin's Blog</a></li>
	      <li><a href="http://sd12582000.blogspot.tw/" target="_blank" title="妮可妮可"><i class="icon-github-alt"></i> Nico's Blog</a></li>
	      <li><a href="http://kuoe0.logdown.com/" target="_blank" title="郭至軒大神"><i class="icon-github-alt"></i> KuoE0's Dots</a></li>
	      <li><a href="http://tyan.io/" title=""><i class="icon-github-alt"></i> Tyan Blog</a></li>
    	</ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
<script type="text/javascript">
  $('#ukagaka_panel').ukagaka();
</script>
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://plus.google.com/u/0/108158678174364359204" target="_blank" title="Google+"><i class="icon-google-plus-sign"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2016 Shiang-Yun Yang 
    </div>  

  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  var disqus_url = 'http://morris821028.github.io/2014/05/23/oj/uva/uva-134-/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>